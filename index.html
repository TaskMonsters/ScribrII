<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, shrink-to-fit=no">
    <title>Task Rock Daily Planner</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#000000">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #f5f5f5;
            color: #000000;
            line-height: 1.6;
            padding: 10px;
            font-size: 14px;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
            text-size-adjust: 100%;
            touch-action: manipulation;
        }

        /* Comprehensive zoom prevention for all input elements */
        input, textarea, select {
            font-size: 16px !important;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
            text-size-adjust: 100%;
            touch-action: manipulation;
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
            user-select: text;
        }
        
        /* Prevent zoom on focus for iOS Safari */
        @supports (-webkit-touch-callout: none) {
            input, textarea, select {
                font-size: 16px !important;
                transform: scale(1);
                -webkit-transform: scale(1);
            }
        }

        .planner-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            width: 100%;
            box-sizing: border-box;
        }

        /* Header Styles - Updated to white/light background */
        .planner-header {
            background: #f8f9fa;
            padding: 24px;
            text-align: center;
            border-bottom: 1px solid #e0e0e0;
        }

        .header-top {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 8px;
            position: relative;
        }

        .dark-mode-toggle {
            background: #f8f9fa;
            border: 1px solid #d0d0d0;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
        }

        .dark-mode-toggle:hover {
            background: #e0e0e0;
            transform: scale(1.05);
        }

        /* Dark Mode Styles - Comprehensive Coverage */
        body.dark-mode {
            background: #1a1a1a;
            color: #e0e0e0;
        }

        body.dark-mode .planner-container {
            background: #2d2d2d;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        body.dark-mode .planner-header {
            background: #2d2d2d;
            border-bottom: 1px solid #404040;
        }

        body.dark-mode .header {
            background: #2d2d2d;
            border-bottom-color: #555555;
        }

        body.dark-mode .planner-title,
        body.dark-mode .planner-subtitle {
            color: #e0e0e0;
        }

        body.dark-mode .logo-light {
            display: none;
        }

        body.dark-mode .logo-dark {
            display: inline-block !important;
        }

        .logo-light, .logo-dark {
            max-height: 40px;
            width: auto;
        }

        body.dark-mode .dark-mode-toggle {
            background: #404040;
            border-color: #555555;
            color: #e0e0e0;
        }

        body.dark-mode .dark-mode-toggle:hover {
            background: #555555;
        }

        /* Fix main navigation background in dark mode */
        body.dark-mode .main-nav {
            background: #2d2d2d !important;
        }

        body.dark-mode .planner-nav {
            background: #2d2d2d !important;
        }

        body.dark-mode .page-navigation {
            background: #2d2d2d !important;
            border-bottom-color: #404040;
        }

        body.dark-mode .nav-btn {
            background: #404040;
            border-color: #555555;
            color: #e0e0e0;
        }

        body.dark-mode .nav-btn:hover {
            background: #555555;
        }

        body.dark-mode .nav-btn.active {
            background: #000000;
            color: #ffffff;
        }

        /* Week navigation date picker buttons dark mode */
        body.dark-mode .week-nav-btn {
            background: #404040 !important;
            border-color: #555555 !important;
            color: #e0e0e0 !important;
        }

        body.dark-mode .week-nav-btn:hover {
            background: #555555 !important;
            border-color: #000000 !important;
        }

        body.dark-mode .week-nav-btn.active {
            background: #000000 !important;
            color: #ffffff !important;
            border-color: #000000 !important;
        }

        /* Date Input Dark Mode */
        body.dark-mode .date-input {
            background: #404040 !important;
            border-color: #555555 !important;
            color: #e0e0e0 !important;
        }

        body.dark-mode .date-input:focus {
            border-color: #000000 !important;
            box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1) !important;
        }

        /* Quote Input Dark Mode */
        body.dark-mode .quote-input {
            background: #404040 !important;
            border-color: #555555 !important;
            color: #e0e0e0 !important;
        }

        body.dark-mode .quote-input:focus {
            border-color: #000000 !important;
            box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1) !important;
            color: #e0e0e0 !important;
        }

        /* All Input and Textarea Elements */
        body.dark-mode input,
        body.dark-mode textarea {
            background: #404040 !important;
            border-color: #555555 !important;
            color: #e0e0e0 !important;
        }

        body.dark-mode input:focus,
        body.dark-mode textarea:focus {
            border-color: #000000 !important;
            box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1) !important;
        }

        /* Placeholder text in dark mode */
        body.dark-mode input::placeholder,
        body.dark-mode textarea::placeholder {
            color: #666666 !important;
            opacity: 1;
        }

        /* Page Styles */
        body.dark-mode .page {
            background: #1a1a1a !important;
            color: #e0e0e0;
        }

        /* Section Styles */
        body.dark-mode .section {
            background: #2d2d2d !important;
            border-color: #555555 !important;
        }

        body.dark-mode .section-header {
            background: #3a3a3a !important;
            border-bottom-color: #555555 !important;
        }

        body.dark-mode .section-title {
            color: #e0e0e0 !important;
        }

        /* Meal Planning Dark Mode */
        body.dark-mode .meal-section {
            background: #3a3a3a !important;
            border-color: #555555 !important;
        }

        body.dark-mode .meal-title {
            color: #e0e0e0 !important;
        }

        body.dark-mode .meal-item {
            background: #3a3a3a !important;
            border-color: #555555 !important;
        }

        body.dark-mode .weekly-meal-day {
            background: #3a3a3a !important;
            border-color: #555555 !important;
        }

        body.dark-mode .day-label {
            color: #e0e0e0 !important;
        }

        /* Time Slot Dark Mode */
        body.dark-mode .time-slot {
            background: #000000 !important;
            color: #ffffff !important;
        }

        /* Tracker Styles Dark Mode */
        body.dark-mode .tracker-title {
            color: #e0e0e0 !important;
        }

        body.dark-mode .mood-option {
            background: #404040 !important;
            border-color: #555555 !important;
        }

        body.dark-mode .mood-option:hover {
            border-color: #000000 !important;
        }

        body.dark-mode .mood-option.selected {
            background: #000000 !important;
            border-color: #000000 !important;
            color: #ffffff !important;
        }

        body.dark-mode .water-glass {
            background: #404040 !important;
            border-color: #555555 !important;
            color: #e0e0e0 !important;
        }

        body.dark-mode .water-glass:hover {
            border-color: #000000 !important;
        }

        body.dark-mode .water-glass.filled {
            background: #000000 !important;
            border-color: #000000 !important;
            color: #ffffff !important;
        }

        /* Todo Checkbox Dark Mode */
        body.dark-mode .todo-checkbox {
            background: #404040 !important;
            border-color: #555555 !important;
        }

        body.dark-mode .todo-checkbox:hover {
            border-color: #000000 !important;
        }

        body.dark-mode .todo-checkbox.filled {
            background: #000000 !important;
            border-color: #000000 !important;
            color: #ffffff !important;
        }

        /* Weekly Sidebar Dark Mode */
        body.dark-mode .weekly-sidebar {
            background: #2d2d2d !important;
            border-color: #555555 !important;
        }

        body.dark-mode .sidebar-title {
            color: #e0e0e0 !important;
        }

        /* Monthly Calendar Dark Mode */
        body.dark-mode .monthly-calendar {
            background: #2d2d2d !important;
            border-color: #555555 !important;
            color: #e0e0e0;
        }

        body.dark-mode .calendar-header {
            background: #3a3a3a !important;
            border-bottom-color: #555555 !important;
            color: #e0e0e0;
        }

        body.dark-mode #monthYear {
            color: #e0e0e0 !important;
        }

        body.dark-mode .calendar-nav {
            background: #404040 !important;
            border-color: #555555 !important;
            color: #e0e0e0 !important;
        }

        body.dark-mode .calendar-nav:hover {
            background: #555555 !important;
            border-color: #000000 !important;
        }

        body.dark-mode .calendar-grid {
            background: #2d2d2d !important;
        }

        body.dark-mode .calendar-day-header {
            background: #3a3a3a !important;
            color: #e0e0e0 !important;
            border-color: #555555 !important;
        }

        body.dark-mode .calendar-day {
            background: #404040 !important;
            border-color: #555555 !important;
            color: #e0e0e0 !important;
        }

        body.dark-mode .calendar-day:hover {
            background: #555555 !important;
        }

        body.dark-mode .calendar-day.today {
            background: #000000 !important;
            color: #ffffff !important;
        }

        body.dark-mode .calendar-day.selected-date {
            background: #000000 !important;
            color: #ffffff !important;
        }

        body.dark-mode .calendar-day.other-month {
            color: #666666 !important;
        }

        /* Focus & Energy Dark Mode */
        body.dark-mode .focus-energy-container {
            background: #1a1a1a !important;
        }

        body.dark-mode .energy-tracking,
        body.dark-mode .focus-timer,
        body.dark-mode .distraction-blockers {
            background: #2d2d2d !important;
            border-color: #555555 !important;
        }

        body.dark-mode .energy-level,
        body.dark-mode .focus-level {
            background: #404040 !important;
            border-color: #555555 !important;
            color: #e0e0e0 !important;
        }

        body.dark-mode .energy-level.selected,
        body.dark-mode .focus-level.selected {
            background: #000000 !important;
            color: #ffffff !important;
        }

        body.dark-mode .timer-preset {
            background: #404040 !important;
            border-color: #555555 !important;
            color: #e0e0e0 !important;
        }

        body.dark-mode .timer-preset:hover,
        body.dark-mode .timer-preset.selected {
            background: #000000 !important;
            color: #ffffff !important;
        }

        body.dark-mode .timer-display {
            color: #e0e0e0 !important;
        }

        body.dark-mode .distraction-item {
            background: #3a3a3a !important;
            border-color: #555555 !important;
        }

        body.dark-mode .distraction-checkbox {
            background: #404040 !important;
            border-color: #555555 !important;
        }

        body.dark-mode .distraction-checkbox.checked {
            background: #000000 !important;
            color: #ffffff !important;
        }

        body.dark-mode .distraction-label {
            color: #e0e0e0 !important;
        }

        /* Brain Dump Dark Mode */
        body.dark-mode .brain-dump-container {
            background: #1a1a1a !important;
        }

        body.dark-mode .brain-dump-section {
            background: #2d2d2d !important;
            border-color: #555555 !important;
        }

        /* Button Dark Mode */
        body.dark-mode .add-capture-btn {
            background: #000000 !important;
            color: #ffffff !important;
        }

        body.dark-mode .add-capture-btn:hover {
            background: #7dd84f !important;
        }

        /* Timer Button Dark Mode */
        body.dark-mode .timer-btn {
            background: #404040 !important;
            border-color: #555555 !important;
            color: #e0e0e0 !important;
        }

        body.dark-mode .timer-btn:hover {
            background: #555555 !important;
        }

        body.dark-mode .timer-btn.start {
            background: #000000 !important;
            color: #ffffff !important;
        }

        /* Fix all section titles and headings in dark mode */
        body.dark-mode .section-title,
        body.dark-mode h3,
        body.dark-mode h4,
        body.dark-mode .meal-title,
        body.dark-mode .tracker-title,
        body.dark-mode .sidebar-title {
            color: #e0e0e0 !important;
        }

        /* Grocery List Dark Mode */
        body.dark-mode .grocery-item {
            background: #3a3a3a !important;
            border-color: #555555 !important;
        }

        body.dark-mode .grocery-check {
            background: #404040 !important;
            border-color: #555555 !important;
        }

        body.dark-mode .grocery-check.checked {
            background: #000000 !important;
            color: #ffffff !important;
        }

        body.dark-mode .grocery-text {
            background: #404040 !important;
            border-color: #555555 !important;
            color: #e0e0e0 !important;
        }

        body.dark-mode .grocery-del {
            background: #555555 !important;
            color: #e0e0e0 !important;
        }

        body.dark-mode .grocery-del:hover {
            background: #666666 !important;
        }

        .planner-title {
            font-size: 28px;
            font-weight: 700;
            color: #000000;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .planner-subtitle {
            font-size: 18px;
            font-weight: 400;
            color: #666666;
            margin: 8px 0 16px 0;
        }

        /* Week Navigation */
        .week-navigation {
            display: flex;
            justify-content: center;
            gap: 4px;
            margin: 16px 0;
            flex-wrap: wrap;
        }

        .week-nav-btn {
            background: white;
            color: #000000;
            border: 1px solid #d0d0d0;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            min-height: 36px;
            min-width: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .week-nav-btn:hover {
            background: #f8f9fa;
            border-color: #000000;
        }

        .week-nav-btn.active {
            background: #000000;
            color: #ffffff;
            border-color: #ffffff;
        }

        .week-nav-btn.nav-arrow {
            font-size: 16px;
            padding: 8px 10px;
        }

        /* Date Input */
        .date-input {
            margin: 16px 0 8px 0;
            padding: 10px 16px;
            border: 1px solid #d0d0d0;
            border-radius: 8px;
            font-size: 14px;
            background: white;
            color: #000000;
            transition: all 0.2s ease;
            min-height: 44px;
        }

        .date-input:focus {
            outline: none;
            border-color: #000000;
            box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);
        }

        /* Quote Input */
        .quote-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #d0d0d0;
            border-radius: 8px;
            font-size: 14px;
            font-style: italic;
            text-align: center;
            background: white;
            color: #666666;
            transition: all 0.2s ease;
            min-height: 44px;
        }

        .quote-input:focus {
            outline: none;
            border-color: #000000;
            box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);
            color: #000000;
        }

        /* Page Navigation */
        .page-navigation {
            background: white;
            padding: 16px;
            display: flex;
            justify-content: center;
            gap: 8px;
            border-bottom: 1px solid #e0e0e0;
            flex-wrap: wrap;
        }

        .nav-btn {
            background: #f8f9fa;
            color: #000000;
            border: 1px solid #d0d0d0;
            padding: 10px 16px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            min-height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            white-space: nowrap;
        }

        .nav-btn:hover {
            background: #e0e0e0;
            border-color: #000000;
        }

        .nav-btn.active {
            background: #000000;
            color: #ffffff;
            border-color: #ffffff;
        }

        /* Page Styles */
        .page {
            display: none;
            padding: 24px;
            background: #f5f5f5;
            min-height: calc(100vh - 300px);
            max-width: 100%;
            box-sizing: border-box;
            overflow-x: hidden;
        }

        .page.active {
            display: block;
        }

        .planner-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            box-sizing: border-box;
        }

        .single-column {
            grid-template-columns: 1fr;
        }

        .left-column, .right-column {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        /* Section Styles */
        .section {
            background: white;
            border-radius: 12px;
            border: 1px solid #e0e0e0;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            max-width: 100%;
            box-sizing: border-box;
        }

        .section-header {
            background: #f8f9fa;
            padding: 16px 20px;
            border-bottom: 1px solid #e0e0e0;
        }

        .section-title {
            font-size: 16px;
            font-weight: 600;
            color: #000000;
            margin: 0;
        }

        .section-content {
            padding: 20px;
            max-width: 100%;
            box-sizing: border-box;
            overflow-x: hidden;
        }

        .full-width-section {
            grid-column: 1 / -1;
        }

        /* Priority Items */
        .priority-item {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
            max-width: 100%;
            overflow-x: hidden;
            box-sizing: border-box;
        }

        .priority-icon {
            width: 32px;
            height: 32px;
            background: #000000;
            color: #ffffff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 700;
            flex-shrink: 0;
        }

        .priority-input {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid #d0d0d0;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.2s ease;
            min-height: 44px;
            min-width: 0;
            max-width: 100%;
            box-sizing: border-box;
        }

        .priority-input:focus {
            outline: none;
            border-color: #000000;
            box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);
        }

        /* Todo Items */
        .todo-item {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 10px;
            max-width: 100%;
            overflow-x: hidden;
            box-sizing: border-box;
        }

        .todo-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid #d0d0d0;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        .todo-checkbox:hover {
            border-color: #000000;
        }

        .todo-checkbox.filled {
            background: #000000;
            border-color: #ffffff;
            color: #ffffff;
        }

        .todo-checkbox.filled::after {
            content: '✓';
            font-size: 12px;
            font-weight: bold;
        }

        .todo-input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid #d0d0d0;
            border-radius: 6px;
            font-size: 14px;
            transition: all 0.2s ease;
            min-height: 44px;
            min-width: 0;
            max-width: 100%;
            box-sizing: border-box;
        }

        .todo-input:focus {
            outline: none;
            border-color: #000000;
            box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);
        }

        /* Schedule Items */
        .schedule-item {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
            max-width: 100%;
            overflow-x: hidden;
            box-sizing: border-box;
        }

        .time-slot {
            width: 80px;
            font-size: 12px;
            font-weight: 600;
            color: #ffffff;
            background: #000000;
            padding: 6px 8px;
            border-radius: 6px;
            text-align: center;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .time-input {
            flex: 1;
            padding: 6px 10px;
            border: 1px solid #d0d0d0;
            border-radius: 6px;
            font-size: 16px;
            transition: all 0.2s ease;
            min-height: 44px;
            min-width: 0;
            max-width: 100%;
            box-sizing: border-box;
        }

        .time-input:focus {
            outline: none;
            border-color: #000000;
            box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);
        }

        /* Tracker Styles */
        .tracker-section {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .mood-tracker, .hydration-tracker {
            text-align: center;
        }

        .tracker-title {
            font-size: 14px;
            font-weight: 600;
            color: #000000;
            margin-bottom: 12px;
        }

        .mood-options {
            display: flex;
            justify-content: center;
            gap: 8px;
            flex-wrap: wrap;
        }

        .mood-option {
            width: 48px;
            height: 48px;
            border: 2px solid #d0d0d0;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            background: white;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        .mood-option:hover {
            border-color: #000000;
            transform: scale(1.1);
        }

        .mood-option.selected {
            background: #000000;
            border-color: #ffffff;
            transform: scale(1.1);
        }

        .hydration-tracker {
            display: flex;
            justify-content: center;
            gap: 6px;
            flex-wrap: wrap;
        }

        .water-glass {
            width: 32px;
            height: 32px;
            border: 2px solid #d0d0d0;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            background: white;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        .water-glass:hover {
            border-color: #000000;
            transform: scale(1.1);
        }

        .water-glass.filled {
            background: #000000;
            border-color: #ffffff;
            color: #ffffff;
        }

        /* Text Areas */
        .notes-textarea, .brain-dump-area {
            width: 100%;
            min-height: 120px;
            padding: 12px;
            border: 1px solid #d0d0d0;
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
            resize: vertical;
            transition: all 0.2s ease;
        }

        .notes-textarea:focus, .brain-dump-area:focus {
            outline: none;
            border-color: #000000;
            box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);
        }

        .brain-dump-area {
            min-height: 200px;
        }

        /* Capture Items */
        .capture-item {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .capture-icon {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            flex-shrink: 0;
        }

        .delete-capture-btn {
            background: #ff4757;
            color: white;
            border: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            opacity: 0.7;
        }

        .delete-capture-btn:hover {
            background: #ff3742;
            opacity: 1;
            transform: scale(1.1);
        }

        .add-capture-section {
            margin-top: 16px;
            text-align: center;
        }

        .add-capture-btn {
            background: #000000;
            color: #ffffff;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .add-capture-btn:hover {
            background: #95e237;
            transform: translateY(-1px);
        }

        .add-icon {
            font-size: 16px;
            font-weight: bold;
        }

        .capture-input {
            flex: 1;
            padding: 10px 12px;
            border: 1px solid #d0d0d0;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.2s ease;
            min-height: 44px;
        }

        .capture-input:focus {
            outline: none;
            border-color: #000000;
            box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);
        }

        /* Meal Planning */
        .meal-planner {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }

        .meal-section {
            background: #f8f9fa;
            padding: 16px;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
        }

        .meal-title {
            font-size: 16px;
            font-weight: 600;
            color: #000000;
            margin-bottom: 12px;
            text-align: center;
        }

        .meal-input {
            width: 100%;
            padding: 8px 10px;
            border: 1px solid #d0d0d0;
            border-radius: 6px;
            font-size: 16px;
            margin-bottom: 8px;
            transition: all 0.2s ease;
            min-height: 44px;
        }

        .meal-input:focus {
            outline: none;
            border-color: #000000;
            box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);
        }

        /* New Meal Planner Styles */
        .meal-item {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
        }

        .meal-icon {
            width: 40px;
            height: 40px;
            background: #000000;
            color: #ffffff;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
        }

        .meal-input-new {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid #d0d0d0;
            border-radius: 6px;
            font-size: 14px;
            transition: all 0.2s ease;
            min-height: 44px;
            background: white;
        }

        .meal-input-new:focus {
            outline: none;
            border-color: #000000;
            box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);
        }

        .meal-prep-textarea {
            width: 100%;
            min-height: 120px;
            padding: 12px 16px;
            border: 1px solid #d0d0d0;
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
            resize: vertical;
            transition: all 0.2s ease;
            background: white;
        }

        .meal-prep-textarea:focus {
            outline: none;
            border-color: #000000;
            box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);
        }

        .weekly-meal-plan {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .weekly-meal-day {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
            max-width: 100%;
            box-sizing: border-box;
        }

        .day-label {
            font-weight: 600;
            color: #000000;
            min-width: 80px;
            font-size: 14px;
            flex-shrink: 0;
        }

        .weekly-meal-input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid #d0d0d0;
            border-radius: 6px;
            font-size: 16px;
            transition: all 0.2s ease;
            min-height: 44px;
            background: white;
            min-width: 0;
            max-width: 100%;
        }

        .weekly-meal-input:focus {
            outline: none;
            border-color: #000000;
            box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);
        }

        /* Weekly View Styles - Enhanced Layout */
        .weekly-container {
            display: flex;
            height: calc(100vh - 200px);
            gap: 8px;
            padding: 0;
            max-width: none;
        }

        .weekly-sidebar {
            width: 280px;
            background: white;
            border-radius: 12px;
            border: 1px solid #e0e0e0;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .sidebar-title {
            font-size: 12px;
            font-weight: 700;
            color: #000000;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
        }

        /* Energy & Focus Styles */
        .energy-meter {
            display: flex;
            gap: 8px;
            justify-content: center;
        }

        .energy-level {
            width: 40px;
            height: 40px;
            border: 2px solid #d0d0d0;
            border-radius: 50%;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            background: white;
        }

        .energy-level:hover {
            border-color: #000000;
            transform: scale(1.1);
        }

        .energy-level.selected {
            background: #000000;
            border-color: #ffffff;
            color: #ffffff;
        }

        .distraction-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .distraction-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
            border: 1px solid #e0e0e0;
        }

        .distraction-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid #d0d0d0;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .distraction-checkbox:hover {
            border-color: #000000;
        }

        .distraction-checkbox.checked {
            background: #000000;
            border-color: #ffffff;
            color: #ffffff;
        }

        .distraction-checkbox.checked::after {
            content: '✓';
            font-size: 12px;
            font-weight: bold;
        }

        .distraction-label {
            font-size: 14px;
            color: #000000;
        }

        /* Timer Styles */
        .timer-section {
            text-align: center;
        }

        .timer-display {
            font-size: 48px;
            font-weight: 700;
            color: #000000;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }

        .timer-presets {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin: 16px 0;
            flex-wrap: wrap;
        }

        .timer-preset {
            background: #f8f9fa;
            color: #000000;
            border: 1px solid #d0d0d0;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .timer-preset:hover,
        .timer-preset.active {
            background: #000000;
            color: #ffffff;
            border-color: #ffffff;
        }

        .timer-controls {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin-top: 16px;
        }

        .timer-btn {
            background: #f8f9fa;
            color: #000000;
            border: 1px solid #d0d0d0;
            padding: 10px 16px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .timer-btn:hover {
            background: #e0e0e0;
        }

        .timer-btn.start {
            background: #000000;
            color: #ffffff;
            border-color: #ffffff;
        }

        /* Calendar Styles */
        .monthly-calendar {
            background: white;
            border-radius: 12px;
            border: 1px solid #e0e0e0;
            overflow: hidden;
        }

        .calendar-header {
            background: #f8f9fa;
            padding: 16px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .calendar-nav {
            background: #f8f9fa;
            color: #000000;
            border: 1px solid #d0d0d0;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .calendar-nav:hover {
            background: #e0e0e0;
            border-color: #000000;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            background: white;
        }

        .calendar-day-header {
            background: #f8f9fa;
            color: #666666;
            font-size: 12px;
            font-weight: 600;
            padding: 12px 8px;
            text-align: center;
            border: 1px solid #e0e0e0;
        }

        .calendar-day {
            background: white;
            border: 1px solid #e0e0e0;
            min-height: 80px;
            padding: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            flex-direction: column;
        }

        .calendar-day:hover {
            background: #f8f9fa;
        }

        .calendar-day.today {
            background: #000000;
            color: #ffffff;
            font-weight: 600;
        }

        .calendar-day.selected-date {
            background: #000000;
            color: #ffffff;
            font-weight: 600;
        }

        .calendar-day.other-month {
            color: #ccc;
            background: #fafafa;
        }

        .calendar-day-number {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .calendar-day-events {
            flex: 1;
            font-size: 11px;
        }

        .calendar-event {
            background: #000000;
            color: #ffffff;
            padding: 2px 6px;
            border-radius: 4px;
            margin-bottom: 2px;
            font-size: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .calendar-event:hover {
            background: #95e237;
        }

        /* Event Modal Styles */
        .event-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .event-modal-content {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .event-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px;
            border-bottom: 1px solid #e0e0e0;
        }

        .event-modal-header h3 {
            margin: 0;
            font-size: 18px;
            font-weight: 600;
            color: #000000;
        }

        .event-modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666666;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
        }

        .event-modal-close:hover {
            background: #f8f9fa;
            color: #000000;
        }

        .event-modal-body {
            padding: 24px;
        }

        .event-input, .event-textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            margin-bottom: 16px;
            transition: all 0.3s ease;
            box-sizing: border-box;
        }

        .event-input:focus, .event-textarea:focus {
            outline: none;
            border-color: #000000;
            box-shadow: 0 0 0 3px rgba(165, 242, 71, 0.1);
        }

        .event-textarea {
            min-height: 80px;
            resize: vertical;
        }

        .event-modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            padding: 20px 24px;
            border-top: 1px solid #e0e0e0;
        }

        .event-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .event-btn-cancel {
            background: #f8f9fa;
            color: #666666;
            border: 1px solid #d0d0d0;
        }

        .event-btn-cancel:hover {
            background: #e0e0e0;
        }

        .event-btn-save {
            background: #000000;
            color: #ffffff;
        }

        .event-btn-save:hover {
            background: #95e237;
        }

        .event-btn-delete {
            background: #dc3545;
            color: white;
        }

        .event-btn-delete:hover {
            background: #c82333;
        }

        /* Dark mode styles for event modal */
        body.dark-mode .event-modal-content {
            background: #2d2d2d !important;
        }

        body.dark-mode .event-modal-header {
            border-bottom-color: #555555 !important;
        }

        body.dark-mode .event-modal-header h3 {
            color: #e0e0e0 !important;
        }

        body.dark-mode .event-modal-close {
            color: #e0e0e0 !important;
        }

        body.dark-mode .event-modal-close:hover {
            background: #404040 !important;
        }

        body.dark-mode .event-input,
        body.dark-mode .event-textarea {
            background: #3a3a3a !important;
            border-color: #555555 !important;
            color: #e0e0e0 !important;
        }

        body.dark-mode .event-input:focus,
        body.dark-mode .event-textarea:focus {
            border-color: #000000 !important;
            box-shadow: 0 0 0 3px rgba(165, 242, 71, 0.2) !important;
        }

        body.dark-mode .event-modal-footer {
            border-top-color: #555555 !important;
        }

        body.dark-mode .event-btn-cancel {
            background: #404040 !important;
            color: #e0e0e0 !important;
            border-color: #555555 !important;
        }

        body.dark-mode .event-btn-cancel:hover {
            background: #555555 !important;
        }

        body.dark-mode .calendar-event {
            background: #000000 !important;
            color: #ffffff !important;
        }

        /* Grocery List Styles */
        .grocery-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .grocery-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px;
            margin-bottom: 8px;
            background: #f8f9fa;
            border-radius: 6px;
            border: 1px solid #e0e0e0;
        }

        .grocery-check {
            width: 20px;
            height: 20px;
            border: 2px solid #d0d0d0;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .grocery-check:hover {
            border-color: #000000;
        }

        .grocery-check.checked {
            background: #000000;
            border-color: #ffffff;
            color: #ffffff;
        }

        .grocery-check.checked::after {
            content: '✓';
            font-size: 12px;
            font-weight: bold;
        }

        .grocery-text {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid #d0d0d0;
            border-radius: 4px;
            font-size: 14px;
            background: white;
        }

        .grocery-text:focus {
            outline: none;
            border-color: #000000;
            box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);
        }

        .grocery-del {
            background: #f8f9fa;
            color: #666666;
            border: 1px solid #d0d0d0;
            width: 28px;
            height: 28px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .grocery-del:hover {
            background: #e0e0e0;
            color: #000000;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .planner-content {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            .weekly-container {
                flex-direction: column;
                height: auto;
            }
            
            .weekly-sidebar {
                width: 100%;
            }
            
            .week-navigation {
                gap: 2px;
            }
            
            .week-nav-btn {
                padding: 6px 8px;
                font-size: 11px;
                min-width: 32px;
                min-height: 32px;
            }
            
            .page-navigation {
                gap: 4px;
            }
            
            .nav-btn {
                padding: 8px 12px;
                font-size: 12px;
                min-height: 36px;
            }
            
            .mood-option {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }
            
            .water-glass {
                width: 28px;
                height: 28px;
                font-size: 14px;
            }
            
            .timer-display {
                font-size: 36px;
            }
            
            .calendar-day {
                min-height: 60px;
                padding: 4px;
            }
            
            .calendar-day-number {
                font-size: 12px;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 2px;
                font-size: 13px;
            }
            
            .planner-header {
                padding: 16px;
            }
            
            .planner-title {
                font-size: 24px;
            }
            
            .planner-subtitle {
                font-size: 16px;
            }
            
            .page {
                padding: 16px;
            }
            
            .section-content {
                padding: 12px;
            }
            
            .priority-input,
            .todo-input,
            .time-input,
            .capture-input,
            .meal-input-new,
            .weekly-meal-input {
                min-height: 40px;
                padding: 8px 12px;
                font-size: 16px;
            }
            
            .weekly-meal-day {
                gap: 8px;
                padding: 8px;
            }
            
            .day-label {
                min-width: 70px;
                font-size: 13px;
            }
            
            .notes-textarea,
            .brain-dump-area,
            .meal-prep-textarea {
                min-height: 100px;
                padding: 10px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="planner-container">
        <!-- Header -->
        <div class="planner-header">
            <div class="header-top">
                <div class="planner-title">
                    <img src="logo.png" alt="Task Rock" class="logo-light">
                    <img src="dark-logo.png" alt="Task Rock" class="logo-dark" style="display: none;">
                </div>
                <button class="dark-mode-toggle" onclick="toggleDarkMode()">🌙</button>
            </div>
            <div class="planner-subtitle">Daily Planner</div>
            
            <!-- Week Navigation -->
            <div class="week-navigation">
                <button class="week-nav-btn nav-arrow" onclick="changeWeek(-1)">‹</button>
                <button class="week-nav-btn" data-day="0" onclick="selectDay(0)">Sun</button>
                <button class="week-nav-btn" data-day="1" onclick="selectDay(1)">Mon</button>
                <button class="week-nav-btn" data-day="2" onclick="selectDay(2)">Tue</button>
                <button class="week-nav-btn" data-day="3" onclick="selectDay(3)">Wed</button>
                <button class="week-nav-btn" data-day="4" onclick="selectDay(4)">Thu</button>
                <button class="week-nav-btn" data-day="5" onclick="selectDay(5)">Fri</button>
                <button class="week-nav-btn" data-day="6" onclick="selectDay(6)">Sat</button>
                <button class="week-nav-btn nav-arrow" onclick="changeWeek(1)">›</button>
            </div>
            
            <!-- Date Input -->
            <input type="date" id="plannerDate" class="date-input">
            
            <!-- Quote Input -->
            <input type="text" class="quote-input" placeholder="Your daily motivation quote...">
        </div>

        <!-- Page Navigation -->
        <div class="page-navigation">
            <button class="nav-btn active" onclick="showPage('daily-plan')">Daily Plan</button>
            <button class="nav-btn" onclick="showPage('meal-planner')">Meal Planner</button>
            <button class="nav-btn" onclick="showPage('weekly-view')">Weekly View</button>
            <button class="nav-btn" onclick="showPage('monthly-view')">Monthly View</button>
            <button class="nav-btn" onclick="showPage('brain-dump')">Brain Dump</button>
            <button class="nav-btn" onclick="showPage('focus-energy')">Focus & Energy</button>
        </div>

        <!-- Page 1: Daily Plan -->
        <div id="daily-plan" class="page active">
            <div class="planner-content">
                <div class="left-column">
                    <!-- Daily Trackers -->
                    <div class="section">
                        <div class="section-header">
                            <h3 class="section-title">📊 Daily Trackers</h3>
                        </div>
                        <div class="section-content">
                            <div class="tracker-section">
                                <div class="mood-tracker">
                                    <div class="tracker-title">How are you feeling?</div>
                                    <div class="mood-options">
                                        <div class="mood-option">😢</div>
                                        <div class="mood-option">😕</div>
                                        <div class="mood-option">😐</div>
                                        <div class="mood-option">😊</div>
                                        <div class="mood-option">😄</div>
                                    </div>
                                </div>
                                
                                <div class="hydration-tracker">
                                    <div class="tracker-title">Water intake (8 glasses)</div>
                                    <div class="hydration-tracker">
                                        <div class="water-glass">💧</div>
                                        <div class="water-glass">💧</div>
                                        <div class="water-glass">💧</div>
                                        <div class="water-glass">💧</div>
                                        <div class="water-glass">💧</div>
                                        <div class="water-glass">💧</div>
                                        <div class="water-glass">💧</div>
                                        <div class="water-glass">💧</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Top 3 Priorities -->
                    <div class="section">
                        <div class="section-header">
                            <h3 class="section-title">🎯 Top 3 Priorities</h3>
                        </div>
                        <div class="section-content">
                            <div class="priority-item">
                                <div class="priority-icon">1</div>
                                <input type="text" class="priority-input" placeholder="Most important task today...">
                            </div>
                            <div class="priority-item">
                                <div class="priority-icon">2</div>
                                <input type="text" class="priority-input" placeholder="Second priority...">
                            </div>
                            <div class="priority-item">
                                <div class="priority-icon">3</div>
                                <input type="text" class="priority-input" placeholder="Third priority...">
                            </div>
                        </div>
                    </div>

                    <!-- Quick Tasks -->
                    <div class="section">
                        <div class="section-header">
                            <h3 class="section-title">✅ Quick Tasks (2-15 min)</h3>
                        </div>
                        <div class="section-content">
                            <div class="todo-item">
                                <div class="todo-checkbox"></div>
                                <input type="text" class="todo-input" placeholder="Quick task or errand...">
                            </div>
                            <div class="todo-item">
                                <div class="todo-checkbox"></div>
                                <input type="text" class="todo-input" placeholder="Email, call, or quick action...">
                            </div>
                            <div class="todo-item">
                                <div class="todo-checkbox"></div>
                                <input type="text" class="todo-input" placeholder="Small task to complete...">
                            </div>
                            <div class="todo-item">
                                <div class="todo-checkbox"></div>
                                <input type="text" class="todo-input" placeholder="Quick win for today...">
                            </div>
                            <div class="todo-item">
                                <div class="todo-checkbox"></div>
                                <input type="text" class="todo-input" placeholder="Fast task to check off...">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="right-column">
                    <!-- Daily Schedule -->
                    <div class="section">
                        <div class="section-header">
                            <h3 class="section-title">🕐 Daily Schedule</h3>
                        </div>
                        <div class="section-content">
                            <div class="schedule-item">
                                <div class="time-slot">12:00 AM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">12:30 AM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">1:00 AM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">1:30 AM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">2:00 AM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">2:30 AM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">3:00 AM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">3:30 AM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">4:00 AM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">4:30 AM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">5:00 AM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">5:30 AM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">6:00 AM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">6:30 AM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">7:00 AM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">7:30 AM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">8:00 AM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">8:30 AM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">9:00 AM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">9:30 AM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">10:00 AM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">10:30 AM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">11:00 AM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">11:30 AM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">12:00 PM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">12:30 PM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">1:00 PM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">1:30 PM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">2:00 PM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">2:30 PM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">3:00 PM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">3:30 PM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">4:00 PM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">4:30 PM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">5:00 PM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">5:30 PM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">6:00 PM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">6:30 PM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">7:00 PM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">7:30 PM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">8:00 PM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">8:30 PM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">9:00 PM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">9:30 PM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">10:00 PM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">10:30 PM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">11:00 PM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">11:30 PM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                            <div class="schedule-item">
                                <div class="time-slot">12:00 AM</div>
                                <input type="text" class="time-input" placeholder="">
                            </div>
                        </div>
                    </div>


                </div>
            </div>

            <!-- Notes Section -->
            <div class="planner-content single-column" style="margin-top: 8px;">
                <div class="section full-width-section">
                    <div class="section-header">
                        <h3 class="section-title">📝 Notes & Reflections</h3>
                    </div>
                    <div class="section-content">
                        <textarea class="notes-textarea" placeholder="How did today go? What did you learn? What would you do differently?"></textarea>
                    </div>
                </div>
            </div>
        </div>

        <!-- Page 2: Meal Planner -->
        <div id="meal-planner" class="page">
            <div class="planner-content">
                <div class="left-column">
                    <!-- Today's Meals -->
                    <div class="section">
                        <div class="section-header">
                            <h3 class="section-title">🍽️ Today's Meals</h3>
                        </div>
                        <div class="section-content">
                            <div class="meal-item">
                                <div class="meal-icon">🌅</div>
                                <input type="text" class="meal-input-new" placeholder="Breakfast ideas...">
                            </div>
                            <div class="meal-item">
                                <div class="meal-icon">☀️</div>
                                <input type="text" class="meal-input-new" placeholder="Lunch plans...">
                            </div>
                            <div class="meal-item">
                                <div class="meal-icon">🌙</div>
                                <input type="text" class="meal-input-new" placeholder="Dinner ideas...">
                            </div>
                            <div class="meal-item">
                                <div class="meal-icon">🍎</div>
                                <input type="text" class="meal-input-new" placeholder="Snacks & treats...">
                            </div>
                        </div>
                    </div>

                    <!-- Meal Prep Ideas -->
                    <div class="section">
                        <div class="section-header">
                            <h3 class="section-title">🥘 Meal Prep & Ideas</h3>
                        </div>
                        <div class="section-content">
                            <textarea id="mealPrepIdeas" class="meal-prep-textarea" placeholder="Meal prep ideas, recipes to try, cooking inspiration..."></textarea>
                        </div>
                    </div>
                </div>

                <div class="right-column">
                    <!-- Weekly Meal Plan -->
                    <div class="section">
                        <div class="section-header">
                            <h3 class="section-title">📅 Weekly Meal Plan</h3>
                        </div>
                        <div class="section-content">
                            <div class="weekly-meal-plan">
                                <div class="weekly-meal-day">
                                    <div class="day-label">Monday</div>
                                    <input type="text" class="weekly-meal-input" placeholder="Main meal...">
                                </div>
                                <div class="weekly-meal-day">
                                    <div class="day-label">Tuesday</div>
                                    <input type="text" class="weekly-meal-input" placeholder="Main meal...">
                                </div>
                                <div class="weekly-meal-day">
                                    <div class="day-label">Wednesday</div>
                                    <input type="text" class="weekly-meal-input" placeholder="Main meal...">
                                </div>
                                <div class="weekly-meal-day">
                                    <div class="day-label">Thursday</div>
                                    <input type="text" class="weekly-meal-input" placeholder="Main meal...">
                                </div>
                                <div class="weekly-meal-day">
                                    <div class="day-label">Friday</div>
                                    <input type="text" class="weekly-meal-input" placeholder="Main meal...">
                                </div>
                                <div class="weekly-meal-day">
                                    <div class="day-label">Saturday</div>
                                    <input type="text" class="weekly-meal-input" placeholder="Main meal...">
                                </div>
                                <div class="weekly-meal-day">
                                    <div class="day-label">Sunday</div>
                                    <input type="text" class="weekly-meal-input" placeholder="Main meal...">
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Grocery List -->
            <div class="planner-content single-column" style="margin-top: 8px;">
                <div class="section full-width-section">
                    <div class="section-header">
                        <h3 class="section-title">🛒 Grocery List</h3>
                    </div>
                    <div class="section-content">
                        <ul id="groceryList" class="grocery-list">
                            <!-- Grocery items will be added dynamically -->
                        </ul>
                        <button onclick="addGroceryItem()" style="background: #000000; color: #ffffff; border: none; padding: 8px 16px; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer; margin-top: 12px;">+ Add Item</button>
                    </div>
                </div>
            </div>

            <!-- Cooking Notes -->
            <div class="planner-content single-column" style="margin-top: 8px;">
                <div class="section full-width-section">
                    <div class="section-header">
                        <h3 class="section-title">👨‍🍳 Cooking Notes & Tips</h3>
                    </div>
                    <div class="section-content">
                        <textarea id="cookingNotes" class="meal-prep-textarea" placeholder="Cooking tips, recipe modifications, what worked well, what to try differently..."></textarea>
                    </div>
                </div>
            </div>
        </div>

        <!-- Page 3: Weekly View -->
        <div id="weekly-view" class="page">
          <div class="planner-content">
            <div class="section full-width-section">
              <div class="section-header">
                <h3 class="section-title">🗓️ Weekly Planner</h3>
              </div>
              <div class="section-content">
                <div class="weekly-scroll" id="weeklyScroll">

                  <div class="week-day-card" data-day="0">
                    <div class="week-day-title">SUN</div>
                    <div class="week-input-row">
                      <input type="text" class="weekly-task-input" placeholder="Add task…">
                      <button class="add-capture-btn week-add-btn">Add</button>
                    </div>
                    <ul class="week-task-list"></ul>
                  </div>
            

                  <div class="week-day-card" data-day="1">
                    <div class="week-day-title">MON</div>
                    <div class="week-input-row">
                      <input type="text" class="weekly-task-input" placeholder="Add task…">
                      <button class="add-capture-btn week-add-btn">Add</button>
                    </div>
                    <ul class="week-task-list"></ul>
                  </div>
            

                  <div class="week-day-card" data-day="2">
                    <div class="week-day-title">TUE</div>
                    <div class="week-input-row">
                      <input type="text" class="weekly-task-input" placeholder="Add task…">
                      <button class="add-capture-btn week-add-btn">Add</button>
                    </div>
                    <ul class="week-task-list"></ul>
                  </div>
            

                  <div class="week-day-card" data-day="3">
                    <div class="week-day-title">WED</div>
                    <div class="week-input-row">
                      <input type="text" class="weekly-task-input" placeholder="Add task…">
                      <button class="add-capture-btn week-add-btn">Add</button>
                    </div>
                    <ul class="week-task-list"></ul>
                  </div>
            

                  <div class="week-day-card" data-day="4">
                    <div class="week-day-title">THU</div>
                    <div class="week-input-row">
                      <input type="text" class="weekly-task-input" placeholder="Add task…">
                      <button class="add-capture-btn week-add-btn">Add</button>
                    </div>
                    <ul class="week-task-list"></ul>
                  </div>
            

                  <div class="week-day-card" data-day="5">
                    <div class="week-day-title">FRI</div>
                    <div class="week-input-row">
                      <input type="text" class="weekly-task-input" placeholder="Add task…">
                      <button class="add-capture-btn week-add-btn">Add</button>
                    </div>
                    <ul class="week-task-list"></ul>
                  </div>
            

                  <div class="week-day-card" data-day="6">
                    <div class="week-day-title">SAT</div>
                    <div class="week-input-row">
                      <input type="text" class="weekly-task-input" placeholder="Add task…">
                      <button class="add-capture-btn week-add-btn">Add</button>
                    </div>
                    <ul class="week-task-list"></ul>
                  </div>
            
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Page 4: Monthly View -->
        <div id="monthly-view" class="page">
            <div class="planner-content single-column">
                <div class="section full-width-section">
                    <div class="section-header">
                        <h3 class="section-title">📅 Monthly Calendar</h3>
                    </div>
                    <div class="section-content">
                        <div class="monthly-calendar">
                            <div class="calendar-header">
                                <button class="calendar-nav" onclick="changeMonth(-1)">‹ Previous</button>
                                <h3 id="monthYear" style="font-size: 18px; font-weight: 600; color: #000000; text-align: center; flex: 1;"></h3>
                                <button class="calendar-nav" onclick="changeMonth(1)">Next ›</button>
                            </div>
                            <div class="calendar-grid">
                                <div class="calendar-day calendar-day-header">Sun</div>
                                <div class="calendar-day calendar-day-header">Mon</div>
                                <div class="calendar-day calendar-day-header">Tue</div>
                                <div class="calendar-day calendar-day-header">Wed</div>
                                <div class="calendar-day calendar-day-header">Thu</div>
                                <div class="calendar-day calendar-day-header">Fri</div>
                                <div class="calendar-day calendar-day-header">Sat</div>
                                <!-- Calendar days will be generated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section full-width-section">
                    <div class="section-header">
                        <h3 class="section-title">🎯 Monthly Goals</h3>
                    </div>
                    <div class="section-content">
                        <div class="monthly-goals-container">
                            <div class="monthly-goal-item" data-month="0">
                                <div class="month-header">
                                    <h4 class="month-title">📅 January</h4>
                                </div>
                                <div class="month-goals-list">
                                    <div class="goal-input-row">
                                        <input type="text" class="monthly-goal-input" placeholder="Add a goal for January...">
                                        <button class="add-goal-btn">Add</button>
                                    </div>
                                    <ul class="month-goal-list"></ul>
                                </div>
                            </div>
                            
                            <div class="monthly-goal-item" data-month="1">
                                <div class="month-header">
                                    <h4 class="month-title">🌸 February</h4>
                                </div>
                                <div class="month-goals-list">
                                    <div class="goal-input-row">
                                        <input type="text" class="monthly-goal-input" placeholder="Add a goal for February...">
                                        <button class="add-goal-btn">Add</button>
                                    </div>
                                    <ul class="month-goal-list"></ul>
                                </div>
                            </div>
                            
                            <div class="monthly-goal-item" data-month="2">
                                <div class="month-header">
                                    <h4 class="month-title">🌱 March</h4>
                                </div>
                                <div class="month-goals-list">
                                    <div class="goal-input-row">
                                        <input type="text" class="monthly-goal-input" placeholder="Add a goal for March...">
                                        <button class="add-goal-btn">Add</button>
                                    </div>
                                    <ul class="month-goal-list"></ul>
                                </div>
                            </div>
                            
                            <div class="monthly-goal-item" data-month="3">
                                <div class="month-header">
                                    <h4 class="month-title">🌷 April</h4>
                                </div>
                                <div class="month-goals-list">
                                    <div class="goal-input-row">
                                        <input type="text" class="monthly-goal-input" placeholder="Add a goal for April...">
                                        <button class="add-goal-btn">Add</button>
                                    </div>
                                    <ul class="month-goal-list"></ul>
                                </div>
                            </div>
                            
                            <div class="monthly-goal-item" data-month="4">
                                <div class="month-header">
                                    <h4 class="month-title">🌻 May</h4>
                                </div>
                                <div class="month-goals-list">
                                    <div class="goal-input-row">
                                        <input type="text" class="monthly-goal-input" placeholder="Add a goal for May...">
                                        <button class="add-goal-btn">Add</button>
                                    </div>
                                    <ul class="month-goal-list"></ul>
                                </div>
                            </div>
                            
                            <div class="monthly-goal-item" data-month="5">
                                <div class="month-header">
                                    <h4 class="month-title">☀️ June</h4>
                                </div>
                                <div class="month-goals-list">
                                    <div class="goal-input-row">
                                        <input type="text" class="monthly-goal-input" placeholder="Add a goal for June...">
                                        <button class="add-goal-btn">Add</button>
                                    </div>
                                    <ul class="month-goal-list"></ul>
                                </div>
                            </div>
                            
                            <div class="monthly-goal-item" data-month="6">
                                <div class="month-header">
                                    <h4 class="month-title">🏖️ July</h4>
                                </div>
                                <div class="month-goals-list">
                                    <div class="goal-input-row">
                                        <input type="text" class="monthly-goal-input" placeholder="Add a goal for July...">
                                        <button class="add-goal-btn">Add</button>
                                    </div>
                                    <ul class="month-goal-list"></ul>
                                </div>
                            </div>
                            
                            <div class="monthly-goal-item" data-month="7">
                                <div class="month-header">
                                    <h4 class="month-title">🌞 August</h4>
                                </div>
                                <div class="month-goals-list">
                                    <div class="goal-input-row">
                                        <input type="text" class="monthly-goal-input" placeholder="Add a goal for August...">
                                        <button class="add-goal-btn">Add</button>
                                    </div>
                                    <ul class="month-goal-list"></ul>
                                </div>
                            </div>
                            
                            <div class="monthly-goal-item" data-month="8">
                                <div class="month-header">
                                    <h4 class="month-title">🍂 September</h4>
                                </div>
                                <div class="month-goals-list">
                                    <div class="goal-input-row">
                                        <input type="text" class="monthly-goal-input" placeholder="Add a goal for September...">
                                        <button class="add-goal-btn">Add</button>
                                    </div>
                                    <ul class="month-goal-list"></ul>
                                </div>
                            </div>
                            
                            <div class="monthly-goal-item" data-month="9">
                                <div class="month-header">
                                    <h4 class="month-title">🎃 October</h4>
                                </div>
                                <div class="month-goals-list">
                                    <div class="goal-input-row">
                                        <input type="text" class="monthly-goal-input" placeholder="Add a goal for October...">
                                        <button class="add-goal-btn">Add</button>
                                    </div>
                                    <ul class="month-goal-list"></ul>
                                </div>
                            </div>
                            
                            <div class="monthly-goal-item" data-month="10">
                                <div class="month-header">
                                    <h4 class="month-title">🦃 November</h4>
                                </div>
                                <div class="month-goals-list">
                                    <div class="goal-input-row">
                                        <input type="text" class="monthly-goal-input" placeholder="Add a goal for November...">
                                        <button class="add-goal-btn">Add</button>
                                    </div>
                                    <ul class="month-goal-list"></ul>
                                </div>
                            </div>
                            
                            <div class="monthly-goal-item" data-month="11">
                                <div class="month-header">
                                    <h4 class="month-title">❄️ December</h4>
                                </div>
                                <div class="month-goals-list">
                                    <div class="goal-input-row">
                                        <input type="text" class="monthly-goal-input" placeholder="Add a goal for December...">
                                        <button class="add-goal-btn">Add</button>
                                    </div>
                                    <ul class="month-goal-list"></ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Event Modal -->
        <div id="eventModal" class="event-modal" style="display: none;">
            <div class="event-modal-content">
                <div class="event-modal-header">
                    <h3 id="eventModalTitle">Add Event</h3>
                    <button class="event-modal-close" onclick="closeEventModal()">&times;</button>
                </div>
                <div class="event-modal-body">
                    <input type="text" id="eventTitle" placeholder="Event title..." class="event-input">
                    <textarea id="eventDescription" placeholder="Event description (optional)..." class="event-textarea"></textarea>
                    <input type="time" id="eventTime" class="event-input">
                </div>
                <div class="event-modal-footer">
                    <button class="event-btn event-btn-cancel" onclick="closeEventModal()">Cancel</button>
                    <button class="event-btn event-btn-save" onclick="saveEvent()">Save Event</button>
                    <button class="event-btn event-btn-delete" id="deleteEventBtn" onclick="deleteEvent()" style="display: none;">Delete</button>
                </div>
            </div>
        </div>

        <!-- Page 5: Brain Dump -->
        <div id="brain-dump" class="page">
            <div class="planner-content single-column">
                <div class="section full-width-section">
                    <div class="section-header">
                        <h3 class="section-title">🧠 Brain Dump</h3>
                    </div>
                    <div class="section-content">
                        <textarea class="brain-dump-area" placeholder="Write everything that's on your mind... thoughts, ideas, worries, random notes, anything you need to get out of your head and onto paper."></textarea>
                    </div>
                </div>

                <div class="section full-width-section">
                    <div class="section-header">
                        <h3 class="section-title">💡 Quick Captures</h3>
                    </div>
                    <div class="section-content">
                        <div id="captures-container">
                            <div class="capture-item">
                                <div class="capture-icon">💡</div>
                                <input type="text" class="capture-input" placeholder="Random idea or thought...">
                            </div>
                            <div class="capture-item">
                                <div class="capture-icon">📞</div>
                                <input type="text" class="capture-input" placeholder="Someone to call or contact...">
                            </div>
                            <div class="capture-item">
                                <div class="capture-icon">🛒</div>
                                <input type="text" class="capture-input" placeholder="Something to buy or remember...">
                            </div>
                            <div class="capture-item">
                                <div class="capture-icon">📚</div>
                                <input type="text" class="capture-input" placeholder="Something to research or learn...">
                            </div>
                            <div class="capture-item">
                                <div class="capture-icon">✨</div>
                                <input type="text" class="capture-input" placeholder="Future project or goal...">
                            </div>
                        </div>
                        <div class="add-capture-section">
                            <button class="add-capture-btn" onclick="addQuickCapture()">
                                <span class="add-icon">+</span> Add More
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Page 6: Focus & Energy -->
        <div id="focus-energy" class="page">
            <div class="planner-content">
                <div class="left-column">
                    <!-- Energy & Focus Tracking -->
                    <div class="section">
                        <div class="section-header">
                            <h3 class="section-title">⚡ Energy & Focus Tracking</h3>
                        </div>
                        <div class="section-content">
                            <div style="margin-bottom: 24px;">
                                <h4 style="font-size: 16px; font-weight: 600; margin-bottom: 12px; color: #000000;">Current Energy Level</h4>
                                <div class="energy-meter">
                                    <div class="energy-level" data-energy="1" onclick="selectEnergyLevel(this, 'energy')">1</div>
                                    <div class="energy-level" data-energy="2" onclick="selectEnergyLevel(this, 'energy')">2</div>
                                    <div class="energy-level" data-energy="3" onclick="selectEnergyLevel(this, 'energy')">3</div>
                                    <div class="energy-level" data-energy="4" onclick="selectEnergyLevel(this, 'energy')">4</div>
                                    <div class="energy-level" data-energy="5" onclick="selectEnergyLevel(this, 'energy')">5</div>
                                </div>
                            </div>
                            <div style="margin-bottom: 24px;">
                                <h4 style="font-size: 16px; font-weight: 600; margin-bottom: 12px; color: #000000;">Current Focus Level</h4>
                                <div class="energy-meter">
                                    <div class="energy-level" data-focus="1" onclick="selectEnergyLevel(this, 'focus')">1</div>
                                    <div class="energy-level" data-focus="2" onclick="selectEnergyLevel(this, 'focus')">2</div>
                                    <div class="energy-level" data-focus="3" onclick="selectEnergyLevel(this, 'focus')">3</div>
                                    <div class="energy-level" data-focus="4" onclick="selectEnergyLevel(this, 'focus')">4</div>
                                    <div class="energy-level" data-focus="5" onclick="selectEnergyLevel(this, 'focus')">5</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Distraction Blockers -->
                    <div class="section">
                        <div class="section-header">
                            <h3 class="section-title">🚫 Distraction Blockers</h3>
                        </div>
                        <div class="section-content">
                            <div class="distraction-list">
                                <div class="distraction-item">
                                    <div class="distraction-checkbox" onclick="toggleDistraction(this)"></div>
                                    <span class="distraction-label">Phone in another room</span>
                                </div>
                                <div class="distraction-item">
                                    <div class="distraction-checkbox" onclick="toggleDistraction(this)"></div>
                                    <span class="distraction-label">Social media blocked</span>
                                </div>
                                <div class="distraction-item">
                                    <div class="distraction-checkbox" onclick="toggleDistraction(this)"></div>
                                    <span class="distraction-label">Email notifications off</span>
                                </div>
                                <div class="distraction-item">
                                    <div class="distraction-checkbox" onclick="toggleDistraction(this)"></div>
                                    <span class="distraction-label">Clean workspace</span>
                                </div>
                                <div class="distraction-item">
                                    <div class="distraction-checkbox" onclick="toggleDistraction(this)"></div>
                                    <span class="distraction-label">Focus music on</span>
                                </div>
                                <div class="distraction-item">
                                    <div class="distraction-checkbox" onclick="toggleDistraction(this)"></div>
                                    <span class="distraction-label">Do not disturb mode</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="right-column">
                    <!-- Focus Timer -->
                    <div class="section">
                        <div class="section-header">
                            <h3 class="section-title">⏱️ Focus Timer</h3>
                        </div>
                        <div class="section-content">
                            <div class="timer-section">
                                <div class="timer-display" id="timerDisplay">25:00</div>
                                <div class="timer-presets">
                                    <button class="timer-preset" onclick="setTimer(25)">25 min</button>
                                    <button class="timer-preset" onclick="setTimer(15)">15 min</button>
                                    <button class="timer-preset" onclick="setTimer(5)">5 min</button>
                                    <button class="timer-preset" onclick="setTimer(45)">45 min</button>
                                    <button class="timer-preset" onclick="setTimer(90)">90 min</button>
                                </div>
                                <div class="timer-controls">
                                    <button class="timer-btn start" onclick="startTimer()">Start</button>
                                    <button class="timer-btn pause" onclick="pauseTimer()">Pause</button>
                                    <button class="timer-btn reset" onclick="resetTimer()">Reset</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Energy Notes -->
                    <div class="section">
                        <div class="section-header">
                            <h3 class="section-title">📝 Energy & Focus Notes</h3>
                        </div>
                        <div class="section-content">
                            <textarea class="notes-textarea" placeholder="What affects your energy? When do you feel most focused? What patterns do you notice?"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentDate = new Date().toISOString().slice(0, 10);
        let currentMonth = new Date();
        let timerInterval;
        let timerMinutes = 25;
        let timerSeconds = 0;
        let timerRunning = false;

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            // Set current date
            document.getElementById('plannerDate').value = currentDate;
            
            // Load monthly events
            loadMonthlyEvents();
            
            // Initialize calendar
            updateCalendar();
            
            // Load saved data
            loadDataForDate(currentDate);
            
            // Set up event listeners
            setupEventListeners();
            
            // Load dark mode preference
            const isDarkMode = localStorage.getItem('darkMode') === 'true';
            if (isDarkMode) {
                document.body.classList.add('dark-mode');
                document.querySelector('.dark-mode-toggle').textContent = '☀️';
            }
            
            // Initialize week navigation
            updateWeekNavigation();
        }

        function setupEventListeners() {
            // Date input change
            document.getElementById('plannerDate').addEventListener('change', function() {
                currentDate = this.value;
                loadDataForDate(currentDate);
                updateWeekNavigation();
            });

            // Auto-save functionality
            document.addEventListener('input', function(e) {
                if (e.target.matches('input, textarea')) {
                    saveDataForDate(currentDate);
                }
            });

            // Quick Tasks checkboxes
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('todo-checkbox')) {
                    toggleTodo(e.target);
                }
                if (e.target.classList.contains('mood-option')) {
                    selectMood(e.target);
                }
                if (e.target.classList.contains('water-glass')) {
                    toggleHydration(e.target);
                }
            });
        }

        // Quick Tasks functionality
        function toggleTodo(checkbox) {
            checkbox.classList.toggle('filled');
            saveDataForDate(currentDate);
        }

        // Mood tracker functionality
        function selectMood(moodOption) {
            // Remove selected class from all mood options
            document.querySelectorAll('.mood-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Add selected class to clicked option
            moodOption.classList.add('selected');
            saveDataForDate(currentDate);
        }

        // Hydration tracker functionality
        function toggleHydration(waterGlass) {
            waterGlass.classList.toggle('filled');
            saveDataForDate(currentDate);
        }

        // Energy level selection
        function selectEnergyLevel(element, type) {
            const container = element.parentElement;
            container.querySelectorAll('.energy-level').forEach(level => {
                level.classList.remove('selected');
            });
            element.classList.add('selected');
            saveDataForDate(currentDate);
        }

        // Distraction blocker toggle
        function toggleDistraction(checkbox) {
            checkbox.classList.toggle('checked');
            saveDataForDate(currentDate);
        }

        // Timer functionality
        function setTimer(minutes) {
            timerMinutes = minutes;
            timerSeconds = 0;
            updateTimerDisplay();
            
            // Update preset buttons
            document.querySelectorAll('.timer-preset').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function startTimer() {
            if (!timerRunning) {
                timerRunning = true;
                timerInterval = setInterval(function() {
                    if (timerSeconds === 0) {
                        if (timerMinutes === 0) {
                            // Timer finished
                            clearInterval(timerInterval);
                            timerRunning = false;
                            alert('Timer finished!');
                            return;
                        }
                        timerMinutes--;
                        timerSeconds = 59;
                    } else {
                        timerSeconds--;
                    }
                    updateTimerDisplay();
                }, 1000);
            }
        }

        function pauseTimer() {
            if (timerRunning) {
                clearInterval(timerInterval);
                timerRunning = false;
            }
        }

        function resetTimer() {
            clearInterval(timerInterval);
            timerRunning = false;
            timerMinutes = 25;
            timerSeconds = 0;
            updateTimerDisplay();
        }

        function updateTimerDisplay() {
            const display = document.getElementById('timerDisplay');
            const mins = timerMinutes.toString().padStart(2, '0');
            const secs = timerSeconds.toString().padStart(2, '0');
            display.textContent = `${mins}:${secs}`;
        }

        // Page navigation
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            
            // Update navigation
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Save current page
            localStorage.setItem('currentPage', pageId);
        }

        // Week navigation
        function updateWeekNavigation() {
            const date = new Date(currentDate + "T00:00:00");
            const dayOfWeek = date.getDay();
            
            // Update active day button
            document.querySelectorAll('.week-nav-btn[data-day]').forEach(btn => {
                btn.classList.remove('active');
            });
            
            const activeBtn = document.querySelector(`[data-day="${dayOfWeek}"]`);
            if (activeBtn) {
                activeBtn.classList.add('active');
            }
        }

        function selectDay(dayIndex) {
            const today = new Date(currentDate + "T00:00:00");
            const currentDay = today.getDay();
            const diff = dayIndex - currentDay;
            
            const newDate = new Date(today);
            newDate.setDate(today.getDate() + diff);
            
            currentDate = newDate.toISOString().slice(0, 10);
            document.getElementById('plannerDate').value = currentDate;
            
            loadDataForDate(currentDate);
            updateWeekNavigation();
        }

        function changeWeek(direction) {
            const date = new Date(currentDate + "T00:00:00");
            date.setDate(date.getDate() + (direction * 7));
            
            currentDate = date.toISOString().slice(0, 10);
            document.getElementById('plannerDate').value = currentDate;
            
            loadDataForDate(currentDate);
            updateWeekNavigation();
        }

        // Calendar functionality
        function updateCalendar() {
            const monthYear = document.getElementById('monthYear');
            const calendarGrid = document.querySelector('.calendar-grid');
            
            if (!monthYear || !calendarGrid) return;
            
            const year = currentMonth.getFullYear();
            const month = currentMonth.getMonth();
            
            monthYear.textContent = currentMonth.toLocaleDateString('en-US', { 
                month: 'long', 
                year: 'numeric' 
            });
            
            // Clear existing calendar days (keep headers)
            const existingDays = calendarGrid.querySelectorAll('.calendar-day:not(.calendar-day-header)');
            existingDays.forEach(day => day.remove());
            
            // Get first day of month and number of days
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const daysInMonth = lastDay.getDate();
            const startingDayOfWeek = firstDay.getDay();
            
            // Add empty cells for days before the first day of the month
            for (let i = 0; i < startingDayOfWeek; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day other-month';
                calendarGrid.appendChild(emptyDay);
            }
            
            // Add days of the month
            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                
                const dayNumber = document.createElement('div');
                dayNumber.className = 'calendar-day-number';
                dayNumber.textContent = day;
                
                const dayEvents = document.createElement('div');
                dayEvents.className = 'calendar-day-events';
                
                dayElement.appendChild(dayNumber);
                dayElement.appendChild(dayEvents);
                
                // Check if this is today
                const today = new Date();
                if (year === today.getFullYear() && 
                    month === today.getMonth() && 
                    day === today.getDate()) {
                    dayElement.classList.add('today');
                }
                
                // Check if this is the selected date
                const selectedDate = new Date(currentDate + "T00:00:00");
                if (year === selectedDate.getFullYear() && 
                    month === selectedDate.getMonth() && 
                    day === selectedDate.getDate()) {
                    dayElement.classList.add('selected-date');
                }
                
                // Add click handler for date selection and event creation
                dayElement.addEventListener('click', function(e) {
                    // Single click - open event modal and select date
                    openEventModal(year, month, day);
                    
                    const newDate = new Date(year, month, day);
                    currentDate = newDate.toISOString().slice(0, 10);
                    document.getElementById('plannerDate').value = currentDate;
                    loadDataForDate(currentDate);
                    updateCalendar();
                    updateWeekNavigation();
                });
                
                // Load and display events for this day
                loadEventsForDay(dayElement, year, month, day);
                
                calendarGrid.appendChild(dayElement);
            }
        }

        // Event management variables
        let currentEventDate = null;
        let currentEventId = null;
        let monthlyEvents = {};

        // Load events from localStorage
        function loadMonthlyEvents() {
            try {
                const saved = localStorage.getItem('monthlyEvents');
                if (saved) {
                    monthlyEvents = JSON.parse(saved);
                }
            } catch (e) {
                monthlyEvents = {};
            }
        }

        // Save events to localStorage
        function saveMonthlyEvents() {
            try {
                localStorage.setItem('monthlyEvents', JSON.stringify(monthlyEvents));
            } catch (e) {
                console.error('Failed to save events:', e);
            }
        }

        // Load events for a specific day
        function loadEventsForDay(dayElement, year, month, day) {
            const dateKey = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
            const dayEvents = monthlyEvents[dateKey] || [];
            
            const eventsContainer = dayElement.querySelector('.calendar-day-events');
            eventsContainer.innerHTML = '';
            
            dayEvents.forEach(event => {
                const eventElement = document.createElement('div');
                eventElement.className = 'calendar-event';
                eventElement.textContent = event.title;
                eventElement.addEventListener('click', function(e) {
                    e.stopPropagation();
                    editEvent(dateKey, event.id);
                });
                eventsContainer.appendChild(eventElement);
            });
        }

        // Open event modal
        function openEventModal(year, month, day, eventId = null) {
            const dateKey = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
            currentEventDate = dateKey;
            currentEventId = eventId;
            
            const modal = document.getElementById('eventModal');
            const modalTitle = document.getElementById('eventModalTitle');
            const eventTitle = document.getElementById('eventTitle');
            const eventDescription = document.getElementById('eventDescription');
            const eventTime = document.getElementById('eventTime');
            const deleteBtn = document.getElementById('deleteEventBtn');
            
            if (eventId) {
                // Editing existing event
                const dayEvents = monthlyEvents[dateKey] || [];
                const event = dayEvents.find(e => e.id === eventId);
                if (event) {
                    modalTitle.textContent = 'Edit Event';
                    eventTitle.value = event.title;
                    eventDescription.value = event.description || '';
                    eventTime.value = event.time || '';
                    deleteBtn.style.display = 'inline-block';
                }
            } else {
                // Creating new event
                modalTitle.textContent = 'Add Event';
                eventTitle.value = '';
                eventDescription.value = '';
                eventTime.value = '';
                deleteBtn.style.display = 'none';
            }
            
            modal.style.display = 'flex';
            eventTitle.focus();
        }

        // Close event modal
        function closeEventModal() {
            document.getElementById('eventModal').style.display = 'none';
            currentEventDate = null;
            currentEventId = null;
        }

        // Save event
        function saveEvent() {
            const eventTitle = document.getElementById('eventTitle').value.trim();
            const eventDescription = document.getElementById('eventDescription').value.trim();
            const eventTime = document.getElementById('eventTime').value;
            
            if (!eventTitle) {
                alert('Please enter an event title');
                return;
            }
            
            if (!monthlyEvents[currentEventDate]) {
                monthlyEvents[currentEventDate] = [];
            }
            
            if (currentEventId) {
                // Update existing event
                const eventIndex = monthlyEvents[currentEventDate].findIndex(e => e.id === currentEventId);
                if (eventIndex !== -1) {
                    monthlyEvents[currentEventDate][eventIndex] = {
                        id: currentEventId,
                        title: eventTitle,
                        description: eventDescription,
                        time: eventTime
                    };
                }
            } else {
                // Create new event
                const newEvent = {
                    id: Date.now().toString(),
                    title: eventTitle,
                    description: eventDescription,
                    time: eventTime
                };
                monthlyEvents[currentEventDate].push(newEvent);
            }
            
            saveMonthlyEvents();
            updateCalendar();
            closeEventModal();
        }

        // Delete event
        function deleteEvent() {
            if (currentEventId && currentEventDate) {
                if (confirm('Are you sure you want to delete this event?')) {
                    monthlyEvents[currentEventDate] = monthlyEvents[currentEventDate].filter(e => e.id !== currentEventId);
                    if (monthlyEvents[currentEventDate].length === 0) {
                        delete monthlyEvents[currentEventDate];
                    }
                    saveMonthlyEvents();
                    updateCalendar();
                    closeEventModal();
                }
            }
        }

        // Edit event
        function editEvent(dateKey, eventId) {
            const [year, month, day] = dateKey.split('-').map(Number);
            openEventModal(year, month - 1, day, eventId);
        }

        function changeMonth(direction) {
            currentMonth.setMonth(currentMonth.getMonth() + direction);
            updateCalendar();
        }

        // Dark mode toggle
        function toggleDarkMode() {
            const body = document.body;
            const toggle = document.querySelector('.dark-mode-toggle');
            
            body.classList.toggle('dark-mode');
            const isDarkMode = body.classList.contains('dark-mode');
            
            // Update toggle icon
            toggle.textContent = isDarkMode ? '☀️' : '🌙';
            
            // Save preference
            localStorage.setItem('darkMode', isDarkMode);
        }

        // Quick capture functionality
        function addQuickCapture() {
            const capturesContainer = document.getElementById('captures-container');
            const captureCount = capturesContainer.children.length;
            
            // Array of icons to cycle through
            const icons = ['💭', '🎯', '📝', '⚡', '🌟', '🔥', '💡', '🚀', '✨', '📌', '🎨', '🔮'];
            const placeholders = [
                'Quick thought or idea...',
                'Something to remember...',
                'Task or action item...',
                'Goal or aspiration...',
                'Creative inspiration...',
                'Important note...',
                'Random capture...',
                'Future reference...',
                'Idea to explore...',
                'Something interesting...'
            ];
            
            // Create new capture item
            const newCaptureItem = document.createElement('div');
            newCaptureItem.className = 'capture-item';
            
            const icon = icons[captureCount % icons.length];
            const placeholder = placeholders[captureCount % placeholders.length];
            
            newCaptureItem.innerHTML = `
                <div class="capture-icon">${icon}</div>
                <input type="text" class="capture-input" placeholder="${placeholder}">
                <button class="delete-capture-btn" onclick="deleteQuickCapture(this)" title="Delete this capture">×</button>
            `;
            
            // Add to container
            capturesContainer.appendChild(newCaptureItem);
            
            // Focus on the new input
            const newInput = newCaptureItem.querySelector('.capture-input');
            newInput.focus();
        }

        // Delete quick capture functionality
        function deleteQuickCapture(button) {
            const captureItem = button.parentElement;
            captureItem.remove();
        }

        // Grocery list functionality
        function addGroceryItem() {
            window._groceryItems = window._groceryItems || [];
            window._groceryItems.push({text: '', done: false});
            renderGrocery();
        }

        function renderGrocery() {
            const ul = document.getElementById('groceryList');
            if (!ul) return;
            
            ul.innerHTML = '';
            (window._groceryItems || []).forEach(function(item, idx) {
                const li = document.createElement('li');
                li.className = 'grocery-item';
                
                const check = document.createElement('div');
                check.className = 'grocery-check' + (item && item.done ? ' checked' : '');
                check.addEventListener('click', function() {
                    item.done = !item.done;
                    renderGrocery();
                });
                
                const input = document.createElement('input');
                input.className = 'grocery-text';
                input.value = item && item.text ? item.text : '';
                input.placeholder = 'Add item… (🥑 🍞 ☕)';
                input.addEventListener('input', function() {
                    item.text = input.value;
                });
                
                const del = document.createElement('button');
                del.className = 'grocery-del';
                del.title = 'Delete';
                del.textContent = '×';
                del.addEventListener('click', function() {
                    window._groceryItems.splice(idx, 1);
                    renderGrocery();
                });
                
                li.appendChild(check);
                li.appendChild(input);
                li.appendChild(del);
                ul.appendChild(li);
            });
        }

        // Data persistence
        function saveDataForDate(dateString) {
            const data = {
                priorities: Array.from(document.querySelectorAll('.priority-input')).map(input => input.value),
                todos: Array.from(document.querySelectorAll('.todo-input')).map(input => input.value),
                todoChecked: Array.from(document.querySelectorAll('.todo-checkbox')).map(cb => cb.classList.contains('filled')),
                schedule: Array.from(document.querySelectorAll('.time-input')).map(input => input.value),
                notes: document.querySelector('.notes-textarea')?.value || '',
                quote: document.querySelector('.quote-input')?.value || '',
                mood: Array.from(document.querySelectorAll('.mood-option')).findIndex(option => option.classList.contains('selected')),
                hydration: Array.from(document.querySelectorAll('.water-glass')).map(glass => glass.classList.contains('filled')),
                energy: Array.from(document.querySelectorAll('.energy-level')).findIndex(level => level.classList.contains('selected')),
                distractions: Array.from(document.querySelectorAll('.distraction-checkbox')).map(cb => cb.classList.contains('checked')),
                captures: Array.from(document.querySelectorAll('.capture-input')).map(input => input.value),
                brainDump: document.querySelector('.brain-dump-area')?.value || '',
                meals: Array.from(document.querySelectorAll('.meal-input-new')).map(input => input.value),
                weeklyMeals: Array.from(document.querySelectorAll('.weekly-meal-input')).map(input => input.value),
                mealPrep: document.getElementById('mealPrepIdeas')?.value || '',
                cookingNotes: document.getElementById('cookingNotes')?.value || '',
                groceryItems: window._groceryItems || []
            };
            
            localStorage.setItem(`taskRock_${dateString}`, JSON.stringify(data));
        }

        function loadDataForDate(dateString) {
            const data = localStorage.getItem(`taskRock_${dateString}`);
            if (!data) return;
            
            try {
                const parsed = JSON.parse(data);
                
                // Load priorities
                if (parsed.priorities) {
                    parsed.priorities.forEach((priority, index) => {
                        const input = document.querySelectorAll('.priority-input')[index];
                        if (input) input.value = priority;
                    });
                }
                
                // Load todos
                if (parsed.todos) {
                    parsed.todos.forEach((todo, index) => {
                        const input = document.querySelectorAll('.todo-input')[index];
                        if (input) input.value = todo;
                    });
                }
                
                // Load todo checkboxes
                if (parsed.todoChecked) {
                    parsed.todoChecked.forEach((checked, index) => {
                        const checkbox = document.querySelectorAll('.todo-checkbox')[index];
                        if (checkbox) {
                            checkbox.classList.toggle('filled', checked);
                        }
                    });
                }
                
                // Load schedule
                if (parsed.schedule) {
                    parsed.schedule.forEach((item, index) => {
                        const input = document.querySelectorAll('.time-input')[index];
                        if (input) input.value = item;
                    });
                }
                
                // Load notes
                if (parsed.notes) {
                    const notesArea = document.querySelector('.notes-textarea');
                    if (notesArea) notesArea.value = parsed.notes;
                }
                
                // Load quote
                if (parsed.quote) {
                    const quoteInput = document.querySelector('.quote-input');
                    if (quoteInput) quoteInput.value = parsed.quote;
                }
                
                // Load mood
                if (parsed.mood >= 0) {
                    document.querySelectorAll('.mood-option').forEach(option => {
                        option.classList.remove('selected');
                    });
                    const moodOption = document.querySelectorAll('.mood-option')[parsed.mood];
                    if (moodOption) moodOption.classList.add('selected');
                }
                
                // Load hydration
                if (parsed.hydration) {
                    parsed.hydration.forEach((filled, index) => {
                        const glass = document.querySelectorAll('.water-glass')[index];
                        if (glass) {
                            glass.classList.toggle('filled', filled);
                        }
                    });
                }
                
                // Load energy
                if (parsed.energy >= 0) {
                    document.querySelectorAll('.energy-level').forEach(level => {
                        level.classList.remove('selected');
                    });
                    const energyLevel = document.querySelectorAll('.energy-level')[parsed.energy];
                    if (energyLevel) energyLevel.classList.add('selected');
                }
                
                // Load distractions
                if (parsed.distractions) {
                    parsed.distractions.forEach((checked, index) => {
                        const checkbox = document.querySelectorAll('.distraction-checkbox')[index];
                        if (checkbox) {
                            checkbox.classList.toggle('checked', checked);
                        }
                    });
                }
                
                // Load captures
                if (parsed.captures) {
                    parsed.captures.forEach((capture, index) => {
                        const input = document.querySelectorAll('.capture-input')[index];
                        if (input) input.value = capture;
                    });
                }
                
                // Load brain dump
                if (parsed.brainDump) {
                    const brainDumpArea = document.querySelector('.brain-dump-area');
                    if (brainDumpArea) brainDumpArea.value = parsed.brainDump;
                }
                
                // Load meals
                if (parsed.meals) {
                    parsed.meals.forEach((meal, index) => {
                        const input = document.querySelectorAll('.meal-input-new')[index];
                        if (input) input.value = meal;
                    });
                }
                
                // Load weekly meals
                if (parsed.weeklyMeals) {
                    parsed.weeklyMeals.forEach((meal, index) => {
                        const input = document.querySelectorAll('.weekly-meal-input')[index];
                        if (input) input.value = meal;
                    });
                }
                
                // Load meal prep
                if (parsed.mealPrep) {
                    const mealPrepArea = document.getElementById('mealPrepIdeas');
                    if (mealPrepArea) mealPrepArea.value = parsed.mealPrep;
                }
                
                // Load cooking notes
                if (parsed.cookingNotes) {
                    const cookingNotesArea = document.getElementById('cookingNotes');
                    if (cookingNotesArea) cookingNotesArea.value = parsed.cookingNotes;
                }
                
                // Load grocery items
                if (parsed.groceryItems) {
                    window._groceryItems = parsed.groceryItems;
                    renderGrocery();
                }
                
            } catch (e) {
                console.error('Error loading data:', e);
            }
        }
    </script>

    <!-- Weekly Planner Functionality -->
    <script>
        // Weekly planner logic
        function getWeekKey(dateString){
            try{
                var d = new Date(dateString + "T00:00:00");
                var day = d.getDay();
                var sun = new Date(d); sun.setDate(d.getDate()-day);
                return sun.toISOString().slice(0,10);
            }catch(e){ return dateString; }
        }
        
        function ensureStore(){ 
            if (!window._weeklyTasksNew) window._weeklyTasksNew = {0:[],1:[],2:[],3:[],4:[],5:[],6:[]}; 
        }
        
        function weekStorageKey(dateString){ 
            return 'taskRock_weeklyNew_' + getWeekKey(dateString || (window.currentDate || new Date().toISOString().slice(0,10))); 
        }
        
        function saveWeekly(){ 
            try { 
                localStorage.setItem(weekStorageKey(window.currentDate), JSON.stringify(window._weeklyTasksNew||{})); 
            } catch(e){} 
        }
        
        function renderWeekly(){
            ensureStore();
            document.querySelectorAll('.week-day-card').forEach(function(card){
                var day = parseInt(card.getAttribute('data-day'),10);
                var ul = card.querySelector('.week-task-list');
                if (!ul) return;
                ul.innerHTML = '';
                (window._weeklyTasksNew[day]||[]).forEach(function(item, idx){
                    var li = document.createElement('li'); 
                    li.className='week-task-item';
                    
                    var c = document.createElement('div'); 
                    c.className='week-task-check' + (item.done?' done':''); 
                    c.addEventListener('click', function(){ 
                        item.done=!item.done; 
                        saveWeekly(); 
                        renderWeekly(); 
                    });
                    
                    var t = document.createElement('input'); 
                    t.className='week-task-text'; 
                    t.value=item.text||''; 
                    t.placeholder='Task…'; 
                    t.addEventListener('input', function(){ 
                        item.text=t.value; 
                        saveWeekly(); 
                    });
                    
                    var del = document.createElement('button'); 
                    del.className='week-task-del'; 
                    del.title='Delete'; 
                    del.textContent='×'; 
                    del.addEventListener('click', function(){ 
                        window._weeklyTasksNew[day].splice(idx,1); 
                        saveWeekly(); 
                        renderWeekly(); 
                    });
                    
                    li.appendChild(c); 
                    li.appendChild(t); 
                    li.appendChild(del);
                    ul.appendChild(li);
                });
            });
        }
        
        function loadWeekly(dateString){
            ensureStore();
            try { 
                var data = JSON.parse(localStorage.getItem(weekStorageKey(dateString)) || '{}'); 
                if (data && typeof data === 'object') {
                    window._weeklyTasksNew = Object.assign({0:[],1:[],2:[],3:[],4:[],5:[],6:[]}, data);
                }
            } catch(e){ 
                ensureStore(); 
            }
            renderWeekly();
        }
        
        function loadWeeklyData() {
            loadWeekly(window.currentDate || new Date().toISOString().slice(0,10));
        }
        
        window.renderWeekly = renderWeekly;
        window.loadWeeklyData = loadWeeklyData;
        
        // Initialize weekly planner
        document.addEventListener('DOMContentLoaded', function(){
            document.querySelectorAll('.week-day-card').forEach(function(card){
                var day = parseInt(card.getAttribute('data-day'),10);
                var add = card.querySelector('.week-add-btn');
                var input = card.querySelector('.weekly-task-input');
                
                function addTask(){
                    var val = (input.value||'').trim();
                    if(!val) return;
                    ensureStore();
                    (window._weeklyTasksNew[day] = window._weeklyTasksNew[day] || []).push({text:val, done:false});
                    input.value='';
                    saveWeekly(); 
                    renderWeekly();
                }
                
                if (add) add.addEventListener('click', addTask);
                if (input) input.addEventListener('keydown', function(e){ 
                    if(e.key==='Enter'){ 
                        e.preventDefault(); 
                        addTask(); 
                    } 
                });
            });
            
            loadWeekly(window.currentDate || new Date().toISOString().slice(0,10));
        });
        
        // Grocery list functionality
        function renderGrocery(){
            var ul = document.getElementById('groceryList');
            if (!ul) return;
            ul.innerHTML = '';
            (window._groceryItems || []).forEach(function(it, idx){
                var li = document.createElement('li'); 
                li.className = 'grocery-item';
                
                var check = document.createElement('div');
                check.className = 'grocery-check' + (it && it.done ? ' checked' : '');
                check.addEventListener('click', function(){ 
                    it.done = !it.done; 
                    renderGrocery(); 
                });
                
                var input = document.createElement('input'); 
                input.className = 'grocery-text'; 
                input.value = it && it.text ? it.text : ''; 
                input.placeholder = 'Add item… (🥑 🍞 ☕)';
                input.addEventListener('input', function(){ 
                    it.text = input.value; 
                });
                
                var del = document.createElement('button'); 
                del.className = 'grocery-del'; 
                del.title = 'Delete'; 
                del.textContent = '×';
                del.addEventListener('click', function(){ 
                    window._groceryItems.splice(idx,1); 
                    renderGrocery(); 
                });
                
                li.appendChild(check); 
                li.appendChild(input); 
                li.appendChild(del);
                ul.appendChild(li);
            });
        }
        
        window.addGroceryItem = function(){
            window._groceryItems = window._groceryItems || [];
            window._groceryItems.push({text:'', done:false});
            renderGrocery();
        };
        
        // Initialize grocery list
        document.addEventListener('DOMContentLoaded', function(){
            window._groceryItems = window._groceryItems || [];
            renderGrocery();
        });

        // Monthly Goals functionality
        let monthlyGoals = {};

        // Load monthly goals from localStorage
        function loadMonthlyGoals() {
            try {
                const saved = localStorage.getItem('monthlyGoals');
                if (saved) {
                    monthlyGoals = JSON.parse(saved);
                }
            } catch (e) {
                monthlyGoals = {};
            }
        }

        // Save monthly goals to localStorage
        function saveMonthlyGoals() {
            try {
                localStorage.setItem('monthlyGoals', JSON.stringify(monthlyGoals));
            } catch (e) {
                console.error('Failed to save monthly goals:', e);
            }
        }

        // Render goals for a specific month
        function renderMonthGoals(monthIndex) {
            const goalsList = document.querySelector(`[data-month="${monthIndex}"] .month-goal-list`);
            if (!goalsList) return;

            goalsList.innerHTML = '';
            const goals = monthlyGoals[monthIndex] || [];

            goals.forEach((goal, index) => {
                const goalItem = document.createElement('li');
                goalItem.className = 'month-goal-item';

                const checkbox = document.createElement('div');
                checkbox.className = 'goal-checkbox' + (goal.completed ? ' completed' : '');
                checkbox.addEventListener('click', function() {
                    goal.completed = !goal.completed;
                    saveMonthlyGoals();
                    renderMonthGoals(monthIndex);
                });

                const goalText = document.createElement('input');
                goalText.className = 'goal-text';
                goalText.value = goal.text || '';
                goalText.placeholder = 'Enter your goal...';
                goalText.addEventListener('input', function() {
                    goal.text = goalText.value;
                    saveMonthlyGoals();
                });

                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'goal-delete-btn';
                deleteBtn.textContent = '×';
                deleteBtn.title = 'Delete goal';
                deleteBtn.addEventListener('click', function() {
                    monthlyGoals[monthIndex].splice(index, 1);
                    if (monthlyGoals[monthIndex].length === 0) {
                        delete monthlyGoals[monthIndex];
                    }
                    saveMonthlyGoals();
                    renderMonthGoals(monthIndex);
                });

                goalItem.appendChild(checkbox);
                goalItem.appendChild(goalText);
                goalItem.appendChild(deleteBtn);
                goalsList.appendChild(goalItem);
            });
        }

        // Add a new goal to a specific month
        function addMonthlyGoal(monthIndex) {
            const input = document.querySelector(`[data-month="${monthIndex}"] .monthly-goal-input`);
            const goalText = input.value.trim();

            if (goalText) {
                if (!monthlyGoals[monthIndex]) {
                    monthlyGoals[monthIndex] = [];
                }

                monthlyGoals[monthIndex].push({
                    text: goalText,
                    completed: false,
                    id: Date.now().toString()
                });

                input.value = '';
                saveMonthlyGoals();
                renderMonthGoals(monthIndex);
            }
        }

        // Initialize monthly goals
        function initializeMonthlyGoals() {
            loadMonthlyGoals();

            // Add event listeners for all months
            for (let month = 0; month < 12; month++) {
                const monthContainer = document.querySelector(`[data-month="${month}"]`);
                if (monthContainer) {
                    const input = monthContainer.querySelector('.monthly-goal-input');
                    const addBtn = monthContainer.querySelector('.add-goal-btn');

                    if (input && addBtn) {
                        // Add button click event
                        addBtn.addEventListener('click', function() {
                            addMonthlyGoal(month);
                        });

                        // Enter key event
                        input.addEventListener('keypress', function(e) {
                            if (e.key === 'Enter') {
                                addMonthlyGoal(month);
                            }
                        });
                    }

                    // Render existing goals
                    renderMonthGoals(month);
                }
            }
        }

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            initializeMonthlyGoals();
        });
    </script>

    <!-- Additional CSS for weekly planner -->
    <style>
        /* Weekly planner styles */
        .weekly-scroll { 
            display: flex; 
            flex-direction: column;
            gap: 16px; 
            padding: 8px 4px 12px; 
        }
        
        .week-day-card { 
            width: 100%;
            border: 1px solid #e0e0e0; 
            border-radius: 16px; 
            padding: 16px; 
            background: #fff; 
        }
        
        .week-day-title { 
            font-weight: 700; 
            letter-spacing: 0.04em; 
            color: #000000; 
            margin-bottom: 10px; 
        }
        
        .week-input-row { 
            display: flex; 
            gap: 12px; 
            align-items: center; 
            margin-bottom: 16px;
        
  overflow: hidden;
}
        
        .week-input-row .weekly-task-input { 
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 16px;
            background: #fff;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        
  min-width: 0;
}
        
        .week-input-row .weekly-task-input:focus {
            outline: none;
            border-color: #000000;
            box-shadow: 0 0 0 3px rgba(165, 242, 71, 0.1);
            transform: translateY(-1px);
        }
        
        .week-add-btn { 
            padding: 12px 20px; 
            border-radius: 12px;
            background: #2d2d2d;
            border: none;
            color: #ffffff;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(165, 242, 71, 0.3);
        }
        
        .week-add-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(165, 242, 71, 0.4);
        }
        
        .week-add-btn:active {
            transform: translateY(0);
        }
        
        .week-task-list { 
            list-style: none; 
            padding: 0; 
            margin: 12px 0 0 0; 
        }
        
        .week-task-item { 
            display: flex; 
            align-items: center; 
            gap: 10px; 
            padding: 8px 10px; 
            border: 1px solid #e0e0e0; 
            border-radius: 10px; 
            margin-bottom: 8px; 
            background: #f8f9fa; 
        }
        
        .week-task-check { 
            width: 18px; 
            height: 18px; 
            border: 2px solid #ced4da; 
            border-radius: 4px; 
            cursor: pointer; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
        }
        
        .week-task-check.done { 
            background: #000000; 
            border-color: #ffffff;
            color: #ffffff;
        }
        
        .week-task-check.done::after {
            content: '✓';
            font-size: 12px;
            font-weight: bold;
            color: #ffffff;
        }
        
        .week-task-text { 
            flex: 1; 
            border: none; 
            background: transparent; 
            outline: none; 
            font-size: 14px; 
        }
        
        .week-task-del { 
            background: transparent; 
            border: none; 
            font-size: 18px; 
            cursor: pointer; 
        }
        
        /* Dark mode styles for weekly planner */
        body.dark-mode .week-day-card { 
            background: #2d2d2d !important; 
            border-color: #444 !important; 
        }
        
        body.dark-mode .week-input-row .weekly-task-input {
            background: #3a3a3a !important;
            border-color: #555555 !important;
            color: #e0e0e0 !important;
        }
        
        body.dark-mode .week-input-row .weekly-task-input:focus {
            border-color: #000000 !important;
            box-shadow: 0 0 0 3px rgba(165, 242, 71, 0.2) !important;
        }
        
        body.dark-mode .week-task-item { 
            background: #3a3a3a !important; 
            border-color: #555555 !important; 
        }
        
        body.dark-mode .week-day-title { 
            color: #f1f1f1 !important; 
        }
        
        body.dark-mode .week-task-text { 
            color: #e0e0e0 !important; 
        }
        
        body.dark-mode .week-task-del { 
            color: #e0e0e0 !important; 
        }
        
        /* Grocery list styles */
        .grocery-list { 
            list-style: none; 
            padding: 0; 
            margin: 0; 
        }
        
        .grocery-item { 
            display: flex; 
            align-items: center; 
            gap: 8px; 
            padding: 10px; 
            border: 1px solid #e0e0e0; 
            border-radius: 8px; 
            margin-bottom: 8px; 
            background: #f8f9fa; 
        }
        
        .grocery-check { 
            width: 18px; 
            height: 18px; 
            border: 2px solid #d0d0d0; 
            border-radius: 4px; 
            cursor: pointer; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
        }
        
        .grocery-check.checked { 
            background: #000000; 
            border-color: #ffffff;
            color: #ffffff;
        }
        
        .grocery-check.checked::after {
            content: '✓';
            font-size: 12px;
            font-weight: bold;
            color: #ffffff;
        }
        
        .grocery-text { 
            flex: 1; 
            border: none; 
            background: transparent; 
            outline: none; 
            font-size: 14px; 
        }
        
        .grocery-del { 
            background: transparent; 
            border: none; 
            font-size: 18px; 
            cursor: pointer; 
        }
        
        /* Dark mode styles for grocery list */
        body.dark-mode .grocery-item { 
            background: #3a3a3a !important; 
            border-color: #555555 !important; 
        }
        
        body.dark-mode .grocery-text { 
            color: #e0e0e0 !important; 
        }
        
        body.dark-mode .grocery-del { 
            color: #e0e0e0 !important; 
        }
        
        /* Monthly Goals Styles */
        .monthly-goals-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .monthly-goal-item {
            border: 1px solid #e0e0e0;
            border-radius: 16px;
            padding: 20px;
            background: #fff;
            transition: all 0.3s ease;
        }
        
        .monthly-goal-item:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .month-header {
            margin-bottom: 16px;
        }
        
        .month-title {
            font-size: 18px;
            font-weight: 700;
            color: #000000;
            margin: 0;
            letter-spacing: 0.02em;
        }
        
        .goal-input-row {
            display: flex;
            gap: 12px;
            align-items: center;
            margin-bottom: 16px;
        }
        
        .monthly-goal-input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 16px;
            background: #fff;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .monthly-goal-input:focus {
            outline: none;
            border-color: #000000;
            box-shadow: 0 0 0 3px rgba(165, 242, 71, 0.1);
            transform: translateY(-1px);
        }
        
        .add-goal-btn {
            padding: 12px 20px;
            border-radius: 12px;
            background: #2d2d2d;
            border: none;
            color: #ffffff;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(165, 242, 71, 0.3);
        }
        
        .add-goal-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(165, 242, 71, 0.4);
        }
        
        .add-goal-btn:active {
            transform: translateY(0);
        }
        
        .month-goal-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .month-goal-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            margin-bottom: 8px;
            background: #f8f9fa;
            transition: all 0.2s ease;
        }
        
        .month-goal-item:hover {
            background: #f1f3f4;
        }
        
        .goal-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid #ced4da;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }
        
        .goal-checkbox.completed {
            background: #000000;
            border-color: #ffffff;
            color: #ffffff;
        }
        
        .goal-checkbox.completed::after {
            content: '✓';
            font-size: 14px;
            font-weight: bold;
            color: #ffffff;
        }
        
        .goal-text {
            flex: 1;
            border: none;
            background: transparent;
            outline: none;
            font-size: 14px;
            color: #000000;
        }
        
        .goal-delete-btn {
            background: transparent;
            border: none;
            font-size: 18px;
            cursor: pointer;
            color: #6c757d;
            transition: color 0.2s ease;
        }
        
        .goal-delete-btn:hover {
            color: #dc3545;
        }
        
        /* Dark mode styles for monthly goals */
        body.dark-mode .monthly-goal-item {
            background: #2d2d2d !important;
            border-color: #555555 !important;
        }
        
        body.dark-mode .month-title {
            color: #e0e0e0 !important;
        }
        
        body.dark-mode .monthly-goal-input {
            background: #3a3a3a !important;
            border-color: #555555 !important;
            color: #e0e0e0 !important;
        }
        
        body.dark-mode .monthly-goal-input:focus {
            border-color: #000000 !important;
            box-shadow: 0 0 0 3px rgba(165, 242, 71, 0.2) !important;
        }
        
        body.dark-mode .month-goal-item {
            background: #3a3a3a !important;
            border-color: #555555 !important;
        }
        
        body.dark-mode .month-goal-item:hover {
            background: #404040 !important;
        }
        
        body.dark-mode .goal-text {
            color: #e0e0e0 !important;
        }
        
        body.dark-mode .goal-delete-btn {
            color: #adb5bd !important;
        }
        
        body.dark-mode .goal-delete-btn:hover {
            color: #dc3545 !important;
        }

        /* Mobile responsive adjustments */
        @media (max-width: 900px) {
            .weekly-scroll { 
                gap: 12px; 
                padding-left: 0; 
                padding-right: 8px; 
            }
            
            .week-day-card { 
                width: 100%; 
            }
            
            .monthly-goals-container {
                gap: 16px;
            }
            
            .monthly-goal-item {
                padding: 16px;
            }
            
            .goal-input-row {
                flex-direction: column;
                gap: 8px;
            }
            
            .monthly-goal-input {
                width: 100%;
            }
            
            .add-goal-btn {
                width: 100%;
            }
        }

        /* Export Button Styles - Monochrome Theme */
        .export-container {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin-top: 16px;
            flex-wrap: wrap;
        }

        .export-btn {
            background: #ffffff;
            color: #000000;
            border: 2px solid #000000;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            min-height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .export-btn:hover {
            background: #000000;
            color: #ffffff;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .export-btn:active {
            transform: translateY(0);
        }

        /* Dark mode export buttons */
        body.dark-mode .export-btn {
            background: #2d2d2d;
            color: #e0e0e0;
            border-color: #e0e0e0;
        }

        body.dark-mode .export-btn:hover {
            background: #e0e0e0;
            color: #000000;
            border-color: #e0e0e0;
        }

        /* Mobile responsive */
        @media (max-width: 768px) {
            .export-container {
                flex-direction: column;
                width: 100%;
            }
            
            .export-btn {
                width: 100%;
            }
        }
    </style>

    <script>
        // Export Functionality for Task Rock Planner
        // Supports PDF and Excel export with professional formatting

        // Add export buttons to header
        function addExportButtons() {
            const header = document.querySelector('.planner-header');
            if (!header) return;
            
            const exportContainer = document.createElement('div');
            exportContainer.className = 'export-container';
            
            const pdfBtn = document.createElement('button');
            pdfBtn.className = 'export-btn export-pdf-btn';
            pdfBtn.innerHTML = '📄 Export as PDF';
            pdfBtn.onclick = exportToPDF;
            
            const excelBtn = document.createElement('button');
            excelBtn.className = 'export-btn export-excel-btn';
            excelBtn.innerHTML = '📊 Export as Excel';
            excelBtn.onclick = exportToExcel;
            
            exportContainer.appendChild(pdfBtn);
            exportContainer.appendChild(excelBtn);
            header.appendChild(exportContainer);
        }

        // Export current page to PDF
        async function exportToPDF() {
            const activePage = document.querySelector('.page.active');
            if (!activePage) {
                alert('No active page to export');
                return;
            }
            
            // Temporarily switch to light mode for export
            const wasDarkMode = document.body.classList.contains('dark-mode');
            if (wasDarkMode) {
                document.body.classList.remove('dark-mode');
            }
            
            const pageTitle = document.querySelector('.nav-btn.active')?.textContent || 'Planner';
            const date = document.getElementById('current-date')?.value || new Date().toISOString().slice(0, 10);
            
            // Create a clean copy for printing
            const printContent = createPrintableContent(activePage, pageTitle, date);
            
            // Open print dialog
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <title>${pageTitle} - ${date}</title>
                    <style>
                        @page {
                            size: A4;
                            margin: 1cm;
                        }
                        
                        * {
                            margin: 0;
                            padding: 0;
                            box-sizing: border-box;
                        }
                        
                        body {
                            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                            font-size: 11pt;
                            line-height: 1.5;
                            color: #000000;
                            background: white;
                            padding: 20px;
                        }
                        
                        .print-header {
                            text-align: center;
                            margin-bottom: 30px;
                            padding-bottom: 15px;
                            border-bottom: 2px solid #000000;
                        }
                        
                        .print-title {
                            font-size: 24pt;
                            font-weight: 700;
                            color: #000000;
                            margin-bottom: 8px;
                        }
                        
                        .print-date {
                            font-size: 14pt;
                            color: #4a4a4a;
                        }
                        
                        .section {
                            margin-bottom: 25px;
                            page-break-inside: avoid;
                            border: 1px solid #d0d0d0;
                            border-radius: 8px;
                            overflow: hidden;
                        }
                        
                        .section-header {
                            background: #f5f5f5;
                            padding: 12px 16px;
                            border-bottom: 1px solid #d0d0d0;
                        }
                        
                        .section-title {
                            font-size: 14pt;
                            font-weight: 600;
                            color: #000000;
                        }
                        
                        .section-content {
                            padding: 16px;
                            background: white;
                        }
                        
                        input, textarea {
                            border: none;
                            border-bottom: 1px solid #d0d0d0;
                            padding: 4px 0;
                            font-size: 11pt;
                            width: 100%;
                            background: transparent;
                            color: #000000;
                        }
                        
                        .priority-item, .todo-item, .schedule-item {
                            margin-bottom: 12px;
                            display: flex;
                            align-items: center;
                            gap: 10px;
                        }
                        
                        .checkbox-placeholder {
                            width: 16px;
                            height: 16px;
                            border: 2px solid #000000;
                            border-radius: 3px;
                            flex-shrink: 0;
                        }
                        
                        .checkbox-placeholder.filled {
                            background: #000000;
                            position: relative;
                        }
                        
                        .checkbox-placeholder.filled::after {
                            content: '✓';
                            position: absolute;
                            top: 50%;
                            left: 50%;
                            transform: translate(-50%, -50%);
                            color: white;
                            font-size: 12px;
                            font-weight: bold;
                        }
                        
                        .priority-icon {
                            width: 24px;
                            height: 24px;
                            background: #000000;
                            color: white;
                            border-radius: 50%;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            font-size: 11pt;
                            font-weight: 700;
                            flex-shrink: 0;
                        }
                        
                        .time-slot {
                            background: #000000;
                            color: white;
                            padding: 4px 8px;
                            border-radius: 4px;
                            font-size: 10pt;
                            font-weight: 600;
                            flex-shrink: 0;
                        }
                        
                        .meal-section {
                            margin-bottom: 16px;
                            padding: 12px;
                            border: 1px solid #d0d0d0;
                            border-radius: 6px;
                        }
                        
                        .meal-title {
                            font-weight: 600;
                            margin-bottom: 8px;
                            color: #000000;
                        }
                        
                        .tracker-grid {
                            display: flex;
                            gap: 8px;
                            flex-wrap: wrap;
                        }
                        
                        .water-glass, .mood-option {
                            width: 30px;
                            height: 30px;
                            border: 2px solid #000000;
                            border-radius: 4px;
                            display: inline-flex;
                            align-items: center;
                            justify-content: center;
                        }
                        
                        .water-glass.filled, .mood-option.selected {
                            background: #000000;
                            color: white;
                        }
                        
                        @media print {
                            body {
                                padding: 0;
                            }
                            
                            .no-print {
                                display: none !important;
                            }
                        }
                    </style>
                </head>
                <body>
                    <div class="print-header">
                        <div class="print-title">${pageTitle}</div>
                        <div class="print-date">${date}</div>
                    </div>
                    ${printContent}
                </body>
                </html>
            `);
            
            printWindow.document.close();
            
            // Wait for content to load then print
            setTimeout(() => {
                printWindow.print();
                
                // Restore dark mode if it was enabled
                if (wasDarkMode) {
                    document.body.classList.add('dark-mode');
                }
            }, 500);
        }

        // Create printable content from active page
        function createPrintableContent(page, title, date) {
            const clone = page.cloneNode(true);
            
            // Remove interactive elements that don't make sense in print
            const elementsToRemove = clone.querySelectorAll('button:not(.no-remove), .dark-mode-toggle, .page-navigation');
            elementsToRemove.forEach(el => el.remove());
            
            // Convert checkboxes to print-friendly versions
            const checkboxes = clone.querySelectorAll('.todo-checkbox, .water-glass, .mood-option, .grocery-check, .week-task-check, .goal-checkbox');
            checkboxes.forEach(checkbox => {
                const placeholder = document.createElement('div');
                placeholder.className = 'checkbox-placeholder';
                if (checkbox.classList.contains('filled') || 
                    checkbox.classList.contains('selected') || 
                    checkbox.classList.contains('checked') ||
                    checkbox.classList.contains('done') ||
                    checkbox.classList.contains('completed')) {
                    placeholder.classList.add('filled');
                }
                checkbox.replaceWith(placeholder);
            });
            
            // Make inputs read-only and show their values
            const inputs = clone.querySelectorAll('input, textarea');
            inputs.forEach(input => {
                const value = input.value || input.placeholder || '';
                input.setAttribute('value', value);
                input.setAttribute('readonly', 'readonly');
            });
            
            return clone.innerHTML;
        }

        // Export current page to Excel (CSV format)
        function exportToExcel() {
            const activePage = document.querySelector('.page.active');
            if (!activePage) {
                alert('No active page to export');
                return;
            }
            
            // Temporarily switch to light mode for export
            const wasDarkMode = document.body.classList.contains('dark-mode');
            if (wasDarkMode) {
                document.body.classList.remove('dark-mode');
            }
            
            const pageTitle = document.querySelector('.nav-btn.active')?.textContent || 'Planner';
            const date = document.getElementById('current-date')?.value || new Date().toISOString().slice(0, 10);
            
            // Extract data from the page
            let csvContent = `Task Rock Planner - ${pageTitle}\nDate: ${date}\n\n`;
            
            // Process each section
            const sections = activePage.querySelectorAll('.section');
            sections.forEach(section => {
                const sectionTitle = section.querySelector('.section-title')?.textContent || '';
                csvContent += `\n${sectionTitle}\n`;
                csvContent += '='.repeat(sectionTitle.length) + '\n';
                
                // Extract priorities
                const priorities = section.querySelectorAll('.priority-item');
                priorities.forEach((item, index) => {
                    const input = item.querySelector('.priority-input');
                    if (input && input.value) {
                        csvContent += `Priority ${index + 1},${escapeCSV(input.value)}\n`;
                    }
                });
                
                // Extract todos
                const todos = section.querySelectorAll('.todo-item');
                todos.forEach(item => {
                    const checkbox = item.querySelector('.todo-checkbox');
                    const input = item.querySelector('.todo-input');
                    if (input && input.value) {
                        const status = checkbox?.classList.contains('filled') ? '[✓]' : '[ ]';
                        csvContent += `${status},${escapeCSV(input.value)}\n`;
                    }
                });
                
                // Extract schedule items
                const scheduleItems = section.querySelectorAll('.schedule-item');
                scheduleItems.forEach(item => {
                    const timeSlot = item.querySelector('.time-slot')?.textContent || '';
                    const input = item.querySelector('.schedule-input');
                    if (input && input.value) {
                        csvContent += `${timeSlot},${escapeCSV(input.value)}\n`;
                    }
                });
                
                // Extract meal planning
                const mealSections = section.querySelectorAll('.meal-section');
                mealSections.forEach(meal => {
                    const mealTitle = meal.querySelector('.meal-title')?.textContent || '';
                    const mealInput = meal.querySelector('.meal-input');
                    if (mealInput && mealInput.value) {
                        csvContent += `${mealTitle},${escapeCSV(mealInput.value)}\n`;
                    }
                });
                
                // Extract notes
                const noteInputs = section.querySelectorAll('textarea');
                noteInputs.forEach(textarea => {
                    if (textarea.value) {
                        csvContent += `\nNotes:\n${escapeCSV(textarea.value)}\n`;
                    }
                });
                
                csvContent += '\n';
            });
            
            // Create and download CSV file
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            
            link.setAttribute('href', url);
            link.setAttribute('download', `TaskRock_${pageTitle}_${date}.csv`);
            link.style.visibility = 'hidden';
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            // Restore dark mode if it was enabled
            if (wasDarkMode) {
                document.body.classList.add('dark-mode');
            }
        }

        // Helper function to escape CSV values
        function escapeCSV(value) {
            if (typeof value !== 'string') return '';
            
            // Escape quotes and wrap in quotes if contains comma, quote, or newline
            if (value.includes(',') || value.includes('"') || value.includes('\n')) {
                return '"' + value.replace(/"/g, '""') + '"';
            }
            return value;
        }

        // Initialize export functionality when DOM is loaded
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', addExportButtons);
        } else {
            addExportButtons();
        }
    </script>
</body>
</html>

